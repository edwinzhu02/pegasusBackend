2019-06-27 10:41:02.044 +12:00 [INF] User profile is available. Using 'C:\Users\Learnspace\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-06-27 10:41:28.794 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/PaymentByDate/1/2019-01-01/2019-07-01  
2019-06-27 10:41:28.838 +12:00 [WRN] Failed to determine the https port for redirect.
2019-06-27 10:41:29.095 +12:00 [INF] Route matched with {action = "PaymentByDate", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PaymentByDate(Int16, System.DateTime, System.DateTime) on controller Pegasus_backend.Controllers.PaymentController (Pegasus_backend).
2019-06-27 10:41:29.768 +12:00 [INF] Executing action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) - Validation state: "Valid"
2019-06-27 10:41:30.802 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-06-27 10:41:32.292 +12:00 [INF] Executed DbCommand (85ms) [Parameters=[@__8__locals1_staffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`org_id`
FROM `ablemusic`.`staff_org` AS `o`
WHERE `o`.`staff_id` = @__8__locals1_staffId_0
2019-06-27 10:41:32.342 +12:00 [WRN] Query: '(from StaffOrg <generated>_1 in [d].Staff.StaffOrg select [<generated>_1].OrgId).FirstOrDefault()' uses First/FirstOrDefault/Last/LastOrDefault operation without OrderBy and filter which may lead to unpredictable results.
2019-06-27 10:41:32.342 +12:00 [WRN] Query: '(from StaffOrg <generated>_1 in [d].Staff.StaffOrg select [<generated>_1].OrgId).FirstOrDefault()' uses First/FirstOrDefault/Last/LastOrDefault operation without OrderBy and filter which may lead to unpredictable results.
2019-06-27 10:41:32.736 +12:00 [INF] Executed DbCommand (96ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`payment_id`, `d`.`after_balance`, `d`.`amount`, `d`.`before_balance`, `d`.`comment`, `d`.`created_at`, `d`.`invoice_id`, `d`.`is_confirmed`, `d`.`learner_id`, `d`.`payment_method`, `d`.`payment_type`, `d`.`staff_id`, `d.Learner`.`learner_id`, `d.Learner`.`address`, `d.Learner`.`contact_num`, `d.Learner`.`created_at`, `d.Learner`.`dob`, `d.Learner`.`email`, `d.Learner`.`enroll_date`, `d.Learner`.`first_name`, `d.Learner`.`form_url`, `d.Learner`.`g5_certification`, `d.Learner`.`gender`, `d.Learner`.`is_abrsm_g5`, `d.Learner`.`is_active`, `d.Learner`.`is_under_18`, `d.Learner`.`last_name`, `d.Learner`.`learner_level`, `d.Learner`.`level_type`, `d.Learner`.`middle_name`, `d.Learner`.`note`, `d.Learner`.`org_id`, `d.Learner`.`otherfile_url`, `d.Learner`.`payment_period`, `d.Learner`.`photo`, `d.Learner`.`referrer`, `d.Learner`.`referrer_learner_id`, `d.Learner`.`user_id`, `d.Invoice`.`invoice_id`, `d.Invoice`.`begin_date`, `d.Invoice`.`concert_fee`, `d.Invoice`.`concert_fee_name`, `d.Invoice`.`course_instance_id`, `d.Invoice`.`course_name`, `d.Invoice`.`created_at`, `d.Invoice`.`due_date`, `d.Invoice`.`end_date`, `d.Invoice`.`group_course_instance_id`, `d.Invoice`.`invoice_num`, `d.Invoice`.`is_active`, `d.Invoice`.`is_paid`, `d.Invoice`.`learner_id`, `d.Invoice`.`learner_name`, `d.Invoice`.`lesson_fee`, `d.Invoice`.`lesson_note_fee_name`, `d.Invoice`.`lesson_quantity`, `d.Invoice`.`note_fee`, `d.Invoice`.`other1_fee`, `d.Invoice`.`other1_fee_name`, `d.Invoice`.`other2_fee`, `d.Invoice`.`other2_fee_name`, `d.Invoice`.`other3_fee`, `d.Invoice`.`other3_fee_name`, `d.Invoice`.`owing_fee`, `d.Invoice`.`paid_fee`, `d.Invoice`.`term_id`, `d.Invoice`.`total_fee`, `d.Staff`.`staff_id`, `d.Staff`.`dob`, `d.Staff`.`email`, `d.Staff`.`expiry_date`, `d.Staff`.`first_name`, `d.Staff`.`gender`, `d.Staff`.`home_phone`, `d.Staff`.`id_number`, `d.Staff`.`id_photo`, `d.Staff`.`id_type`, `d.Staff`.`ird_number`, `d.Staff`.`is_activate`, `d.Staff`.`last_name`, `d.Staff`.`mobile_phone`, `d.Staff`.`photo`, `d.Staff`.`user_id`, `d.Staff`.`visa`
FROM `ablemusic`.`payment` AS `d`
LEFT JOIN `ablemusic`.`learner` AS `d.Learner` ON `d`.`learner_id` = `d.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice` ON `d`.`invoice_id` = `d.Invoice`.`invoice_id`
LEFT JOIN `ablemusic`.`staff` AS `d.Staff` ON `d`.`staff_id` = `d.Staff`.`staff_id`
WHERE ((`d`.`created_at` > @__8__locals1_beginDate_0) AND (`d`.`created_at` < @__8__locals1_endDate_1)) AND (
    SELECT `s`.`org_id`
    FROM `ablemusic`.`staff_org` AS `s`
    WHERE `d.Staff`.`staff_id` = `s`.`staff_id`
    LIMIT 1
) IN (1)
ORDER BY `d`.`payment_id`
2019-06-27 10:41:33.052 +12:00 [INF] Executed DbCommand (72ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d.SoldTransaction`.`tran_id`, `d.SoldTransaction`.`aflter_quantity`, `d.SoldTransaction`.`amount`, `d.SoldTransaction`.`balance`, `d.SoldTransaction`.`before_quantity`, `d.SoldTransaction`.`created_at`, `d.SoldTransaction`.`discount_amount`, `d.SoldTransaction`.`discount_rate`, `d.SoldTransaction`.`discounted_amount`, `d.SoldTransaction`.`learner_id`, `d.SoldTransaction`.`note`, `d.SoldTransaction`.`payment_id`, `d.SoldTransaction`.`product_id`, `d.SoldTransaction`.`sold_quantity`, `d.SoldTransaction`.`stock_id`, `s.Product`.`product_id`, `s.Product`.`brand`, `s.Product`.`model`, `s.Product`.`prod_type_id`, `s.Product`.`product_name`, `s.Product`.`sell_price`, `s.Product`.`wholesale_price`
FROM `ablemusic`.`sold_transaction` AS `d.SoldTransaction`
LEFT JOIN `ablemusic`.`product` AS `s.Product` ON `d.SoldTransaction`.`product_id` = `s.Product`.`product_id`
INNER JOIN (
    SELECT DISTINCT `d0`.`payment_id`
    FROM `ablemusic`.`payment` AS `d0`
    LEFT JOIN `ablemusic`.`learner` AS `d.Learner0` ON `d0`.`learner_id` = `d.Learner0`.`learner_id`
    LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice0` ON `d0`.`invoice_id` = `d.Invoice0`.`invoice_id`
    LEFT JOIN `ablemusic`.`staff` AS `d.Staff0` ON `d0`.`staff_id` = `d.Staff0`.`staff_id`
    WHERE ((`d0`.`created_at` > @__8__locals1_beginDate_0) AND (`d0`.`created_at` < @__8__locals1_endDate_1)) AND (
        SELECT `s0`.`org_id`
        FROM `ablemusic`.`staff_org` AS `s0`
        WHERE `d.Staff0`.`staff_id` = `s0`.`staff_id`
        LIMIT 1
    ) IN (1)
) AS `t` ON `d.SoldTransaction`.`payment_id` = `t`.`payment_id`
ORDER BY `t`.`payment_id`
2019-06-27 10:41:33.197 +12:00 [INF] Executed action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3420.8113000000003ms.
2019-06-27 10:41:33.205 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-06-27 10:41:33.327 +12:00 [INF] Executed action Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) in 4229.5331000000006ms
2019-06-27 10:41:33.331 +12:00 [INF] Request finished in 4538.284ms 200 application/json; charset=utf-8
2019-06-27 10:45:57.700 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/PaymentByDate/1/2019-01-01/2019-07-01  
2019-06-27 10:45:57.760 +12:00 [INF] Route matched with {action = "PaymentByDate", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PaymentByDate(Int16, System.DateTime, System.DateTime) on controller Pegasus_backend.Controllers.PaymentController (Pegasus_backend).
2019-06-27 10:45:57.761 +12:00 [INF] Executing action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) - Validation state: "Valid"
2019-06-27 10:45:57.762 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-06-27 10:45:58.749 +12:00 [INF] Executed DbCommand (49ms) [Parameters=[@__8__locals1_staffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`org_id`
FROM `ablemusic`.`staff_org` AS `o`
WHERE `o`.`staff_id` = @__8__locals1_staffId_0
2019-06-27 10:45:59.244 +12:00 [INF] Executed DbCommand (338ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`payment_id`, `d`.`after_balance`, `d`.`amount`, `d`.`before_balance`, `d`.`comment`, `d`.`created_at`, `d`.`invoice_id`, `d`.`is_confirmed`, `d`.`learner_id`, `d`.`payment_method`, `d`.`payment_type`, `d`.`staff_id`, `d.Learner`.`learner_id`, `d.Learner`.`address`, `d.Learner`.`contact_num`, `d.Learner`.`created_at`, `d.Learner`.`dob`, `d.Learner`.`email`, `d.Learner`.`enroll_date`, `d.Learner`.`first_name`, `d.Learner`.`form_url`, `d.Learner`.`g5_certification`, `d.Learner`.`gender`, `d.Learner`.`is_abrsm_g5`, `d.Learner`.`is_active`, `d.Learner`.`is_under_18`, `d.Learner`.`last_name`, `d.Learner`.`learner_level`, `d.Learner`.`level_type`, `d.Learner`.`middle_name`, `d.Learner`.`note`, `d.Learner`.`org_id`, `d.Learner`.`otherfile_url`, `d.Learner`.`payment_period`, `d.Learner`.`photo`, `d.Learner`.`referrer`, `d.Learner`.`referrer_learner_id`, `d.Learner`.`user_id`, `d.Invoice`.`invoice_id`, `d.Invoice`.`begin_date`, `d.Invoice`.`concert_fee`, `d.Invoice`.`concert_fee_name`, `d.Invoice`.`course_instance_id`, `d.Invoice`.`course_name`, `d.Invoice`.`created_at`, `d.Invoice`.`due_date`, `d.Invoice`.`end_date`, `d.Invoice`.`group_course_instance_id`, `d.Invoice`.`invoice_num`, `d.Invoice`.`is_active`, `d.Invoice`.`is_paid`, `d.Invoice`.`learner_id`, `d.Invoice`.`learner_name`, `d.Invoice`.`lesson_fee`, `d.Invoice`.`lesson_note_fee_name`, `d.Invoice`.`lesson_quantity`, `d.Invoice`.`note_fee`, `d.Invoice`.`other1_fee`, `d.Invoice`.`other1_fee_name`, `d.Invoice`.`other2_fee`, `d.Invoice`.`other2_fee_name`, `d.Invoice`.`other3_fee`, `d.Invoice`.`other3_fee_name`, `d.Invoice`.`owing_fee`, `d.Invoice`.`paid_fee`, `d.Invoice`.`term_id`, `d.Invoice`.`total_fee`, `d.Staff`.`staff_id`, `d.Staff`.`dob`, `d.Staff`.`email`, `d.Staff`.`expiry_date`, `d.Staff`.`first_name`, `d.Staff`.`gender`, `d.Staff`.`home_phone`, `d.Staff`.`id_number`, `d.Staff`.`id_photo`, `d.Staff`.`id_type`, `d.Staff`.`ird_number`, `d.Staff`.`is_activate`, `d.Staff`.`last_name`, `d.Staff`.`mobile_phone`, `d.Staff`.`photo`, `d.Staff`.`user_id`, `d.Staff`.`visa`
FROM `ablemusic`.`payment` AS `d`
LEFT JOIN `ablemusic`.`learner` AS `d.Learner` ON `d`.`learner_id` = `d.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice` ON `d`.`invoice_id` = `d.Invoice`.`invoice_id`
LEFT JOIN `ablemusic`.`staff` AS `d.Staff` ON `d`.`staff_id` = `d.Staff`.`staff_id`
WHERE ((`d`.`created_at` > @__8__locals1_beginDate_0) AND (`d`.`created_at` < @__8__locals1_endDate_1)) AND (
    SELECT `s`.`org_id`
    FROM `ablemusic`.`staff_org` AS `s`
    WHERE `d.Staff`.`staff_id` = `s`.`staff_id`
    LIMIT 1
) IN (1)
ORDER BY `d`.`payment_id`
2019-06-27 10:46:01.033 +12:00 [INF] Executed DbCommand (1,008ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d.SoldTransaction`.`tran_id`, `d.SoldTransaction`.`aflter_quantity`, `d.SoldTransaction`.`amount`, `d.SoldTransaction`.`balance`, `d.SoldTransaction`.`before_quantity`, `d.SoldTransaction`.`created_at`, `d.SoldTransaction`.`discount_amount`, `d.SoldTransaction`.`discount_rate`, `d.SoldTransaction`.`discounted_amount`, `d.SoldTransaction`.`learner_id`, `d.SoldTransaction`.`note`, `d.SoldTransaction`.`payment_id`, `d.SoldTransaction`.`product_id`, `d.SoldTransaction`.`sold_quantity`, `d.SoldTransaction`.`stock_id`, `s.Product`.`product_id`, `s.Product`.`brand`, `s.Product`.`model`, `s.Product`.`prod_type_id`, `s.Product`.`product_name`, `s.Product`.`sell_price`, `s.Product`.`wholesale_price`
FROM `ablemusic`.`sold_transaction` AS `d.SoldTransaction`
LEFT JOIN `ablemusic`.`product` AS `s.Product` ON `d.SoldTransaction`.`product_id` = `s.Product`.`product_id`
INNER JOIN (
    SELECT DISTINCT `d0`.`payment_id`
    FROM `ablemusic`.`payment` AS `d0`
    LEFT JOIN `ablemusic`.`learner` AS `d.Learner0` ON `d0`.`learner_id` = `d.Learner0`.`learner_id`
    LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice0` ON `d0`.`invoice_id` = `d.Invoice0`.`invoice_id`
    LEFT JOIN `ablemusic`.`staff` AS `d.Staff0` ON `d0`.`staff_id` = `d.Staff0`.`staff_id`
    WHERE ((`d0`.`created_at` > @__8__locals1_beginDate_0) AND (`d0`.`created_at` < @__8__locals1_endDate_1)) AND (
        SELECT `s0`.`org_id`
        FROM `ablemusic`.`staff_org` AS `s0`
        WHERE `d.Staff0`.`staff_id` = `s0`.`staff_id`
        LIMIT 1
    ) IN (1)
) AS `t` ON `d.SoldTransaction`.`payment_id` = `t`.`payment_id`
ORDER BY `t`.`payment_id`
2019-06-27 10:49:56.609 +12:00 [INF] Executed action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 238848.0013ms.
2019-06-27 10:49:56.610 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-06-27 10:49:56.614 +12:00 [INF] Executed action Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) in 238853.7889ms
2019-06-27 10:49:56.614 +12:00 [INF] Request finished in 238913.7819ms 200 application/json; charset=utf-8
2019-06-27 10:52:19.896 +12:00 [INF] User profile is available. Using 'C:\Users\Learnspace\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-06-27 10:52:20.842 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2019-06-27 10:52:20.875 +12:00 [WRN] Failed to determine the https port for redirect.
2019-06-27 10:52:21.063 +12:00 [INF] Request finished in 222.4763ms 404 
2019-06-27 10:52:28.970 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/PaymentByDate/1/2019-01-01/2019-07-01  
2019-06-27 10:52:29.042 +12:00 [INF] Route matched with {action = "PaymentByDate", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PaymentByDate(Int16, System.DateTime, System.DateTime) on controller Pegasus_backend.Controllers.PaymentController (Pegasus_backend).
2019-06-27 10:52:29.577 +12:00 [INF] Executing action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) - Validation state: "Valid"
2019-06-27 10:52:30.558 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-06-27 10:52:31.838 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[@__8__locals1_staffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`org_id`
FROM `ablemusic`.`staff_org` AS `o`
WHERE `o`.`staff_id` = @__8__locals1_staffId_0
2019-06-27 10:52:31.884 +12:00 [WRN] Query: '(from StaffOrg <generated>_1 in [d].Staff.StaffOrg select [<generated>_1].OrgId).FirstOrDefault()' uses First/FirstOrDefault/Last/LastOrDefault operation without OrderBy and filter which may lead to unpredictable results.
2019-06-27 10:52:31.884 +12:00 [WRN] Query: '(from StaffOrg <generated>_1 in [d].Staff.StaffOrg select [<generated>_1].OrgId).FirstOrDefault()' uses First/FirstOrDefault/Last/LastOrDefault operation without OrderBy and filter which may lead to unpredictable results.
2019-06-27 10:52:32.277 +12:00 [INF] Executed DbCommand (100ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`payment_id`, `d`.`after_balance`, `d`.`amount`, `d`.`before_balance`, `d`.`comment`, `d`.`created_at`, `d`.`invoice_id`, `d`.`is_confirmed`, `d`.`learner_id`, `d`.`payment_method`, `d`.`payment_type`, `d`.`staff_id`, `d.Learner`.`learner_id`, `d.Learner`.`address`, `d.Learner`.`contact_num`, `d.Learner`.`created_at`, `d.Learner`.`dob`, `d.Learner`.`email`, `d.Learner`.`enroll_date`, `d.Learner`.`first_name`, `d.Learner`.`form_url`, `d.Learner`.`g5_certification`, `d.Learner`.`gender`, `d.Learner`.`is_abrsm_g5`, `d.Learner`.`is_active`, `d.Learner`.`is_under_18`, `d.Learner`.`last_name`, `d.Learner`.`learner_level`, `d.Learner`.`level_type`, `d.Learner`.`middle_name`, `d.Learner`.`note`, `d.Learner`.`org_id`, `d.Learner`.`otherfile_url`, `d.Learner`.`payment_period`, `d.Learner`.`photo`, `d.Learner`.`referrer`, `d.Learner`.`referrer_learner_id`, `d.Learner`.`user_id`, `d.Invoice`.`invoice_id`, `d.Invoice`.`begin_date`, `d.Invoice`.`concert_fee`, `d.Invoice`.`concert_fee_name`, `d.Invoice`.`course_instance_id`, `d.Invoice`.`course_name`, `d.Invoice`.`created_at`, `d.Invoice`.`due_date`, `d.Invoice`.`end_date`, `d.Invoice`.`group_course_instance_id`, `d.Invoice`.`invoice_num`, `d.Invoice`.`is_active`, `d.Invoice`.`is_paid`, `d.Invoice`.`learner_id`, `d.Invoice`.`learner_name`, `d.Invoice`.`lesson_fee`, `d.Invoice`.`lesson_note_fee_name`, `d.Invoice`.`lesson_quantity`, `d.Invoice`.`note_fee`, `d.Invoice`.`other1_fee`, `d.Invoice`.`other1_fee_name`, `d.Invoice`.`other2_fee`, `d.Invoice`.`other2_fee_name`, `d.Invoice`.`other3_fee`, `d.Invoice`.`other3_fee_name`, `d.Invoice`.`owing_fee`, `d.Invoice`.`paid_fee`, `d.Invoice`.`term_id`, `d.Invoice`.`total_fee`, `d.Staff`.`staff_id`, `d.Staff`.`dob`, `d.Staff`.`email`, `d.Staff`.`expiry_date`, `d.Staff`.`first_name`, `d.Staff`.`gender`, `d.Staff`.`home_phone`, `d.Staff`.`id_number`, `d.Staff`.`id_photo`, `d.Staff`.`id_type`, `d.Staff`.`ird_number`, `d.Staff`.`is_activate`, `d.Staff`.`last_name`, `d.Staff`.`mobile_phone`, `d.Staff`.`photo`, `d.Staff`.`user_id`, `d.Staff`.`visa`
FROM `ablemusic`.`payment` AS `d`
LEFT JOIN `ablemusic`.`learner` AS `d.Learner` ON `d`.`learner_id` = `d.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice` ON `d`.`invoice_id` = `d.Invoice`.`invoice_id`
LEFT JOIN `ablemusic`.`staff` AS `d.Staff` ON `d`.`staff_id` = `d.Staff`.`staff_id`
WHERE (((`d`.`created_at` > @__8__locals1_beginDate_0) AND (`d`.`created_at` < @__8__locals1_endDate_1)) AND (
    SELECT `s`.`org_id`
    FROM `ablemusic`.`staff_org` AS `s`
    WHERE `d.Staff`.`staff_id` = `s`.`staff_id`
    LIMIT 1
) IN (1)) AND (`d`.`payment_id` = 284)
ORDER BY `d`.`payment_id`
2019-06-27 10:52:32.581 +12:00 [INF] Executed DbCommand (74ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d.SoldTransaction`.`tran_id`, `d.SoldTransaction`.`aflter_quantity`, `d.SoldTransaction`.`amount`, `d.SoldTransaction`.`balance`, `d.SoldTransaction`.`before_quantity`, `d.SoldTransaction`.`created_at`, `d.SoldTransaction`.`discount_amount`, `d.SoldTransaction`.`discount_rate`, `d.SoldTransaction`.`discounted_amount`, `d.SoldTransaction`.`learner_id`, `d.SoldTransaction`.`note`, `d.SoldTransaction`.`payment_id`, `d.SoldTransaction`.`product_id`, `d.SoldTransaction`.`sold_quantity`, `d.SoldTransaction`.`stock_id`, `s.Product`.`product_id`, `s.Product`.`brand`, `s.Product`.`model`, `s.Product`.`prod_type_id`, `s.Product`.`product_name`, `s.Product`.`sell_price`, `s.Product`.`wholesale_price`
FROM `ablemusic`.`sold_transaction` AS `d.SoldTransaction`
LEFT JOIN `ablemusic`.`product` AS `s.Product` ON `d.SoldTransaction`.`product_id` = `s.Product`.`product_id`
INNER JOIN (
    SELECT DISTINCT `d0`.`payment_id`
    FROM `ablemusic`.`payment` AS `d0`
    LEFT JOIN `ablemusic`.`learner` AS `d.Learner0` ON `d0`.`learner_id` = `d.Learner0`.`learner_id`
    LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice0` ON `d0`.`invoice_id` = `d.Invoice0`.`invoice_id`
    LEFT JOIN `ablemusic`.`staff` AS `d.Staff0` ON `d0`.`staff_id` = `d.Staff0`.`staff_id`
    WHERE (((`d0`.`created_at` > @__8__locals1_beginDate_0) AND (`d0`.`created_at` < @__8__locals1_endDate_1)) AND (
        SELECT `s0`.`org_id`
        FROM `ablemusic`.`staff_org` AS `s0`
        WHERE `d.Staff0`.`staff_id` = `s0`.`staff_id`
        LIMIT 1
    ) IN (1)) AND (`d0`.`payment_id` = 284)
) AS `t` ON `d.SoldTransaction`.`payment_id` = `t`.`payment_id`
ORDER BY `t`.`payment_id`
2019-06-27 10:55:45.987 +12:00 [INF] User profile is available. Using 'C:\Users\Learnspace\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-06-27 10:55:46.877 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2019-06-27 10:55:46.914 +12:00 [WRN] Failed to determine the https port for redirect.
2019-06-27 10:55:47.109 +12:00 [INF] Request finished in 234.2735ms 404 
2019-06-27 10:57:15.191 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/PaymentByDate/1/2019-01-01/2019-07-01  
2019-06-27 10:57:15.226 +12:00 [INF] Route matched with {action = "PaymentByDate", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PaymentByDate(Int16, System.DateTime, System.DateTime) on controller Pegasus_backend.Controllers.PaymentController (Pegasus_backend).
2019-06-27 10:57:15.752 +12:00 [INF] Executing action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) - Validation state: "Valid"
2019-06-27 10:57:16.711 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-06-27 10:57:17.867 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@__8__locals1_staffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`org_id`
FROM `ablemusic`.`staff_org` AS `o`
WHERE `o`.`staff_id` = @__8__locals1_staffId_0
2019-06-27 10:57:17.908 +12:00 [WRN] Query: '(from StaffOrg <generated>_1 in [d].Staff.StaffOrg select [<generated>_1].OrgId).FirstOrDefault()' uses First/FirstOrDefault/Last/LastOrDefault operation without OrderBy and filter which may lead to unpredictable results.
2019-06-27 10:57:17.909 +12:00 [WRN] Query: '(from StaffOrg <generated>_1 in [d].Staff.StaffOrg select [<generated>_1].OrgId).FirstOrDefault()' uses First/FirstOrDefault/Last/LastOrDefault operation without OrderBy and filter which may lead to unpredictable results.
2019-06-27 10:57:18.296 +12:00 [INF] Executed DbCommand (97ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`payment_id`, `d`.`after_balance`, `d`.`amount`, `d`.`before_balance`, `d`.`comment`, `d`.`created_at`, `d`.`invoice_id`, `d`.`is_confirmed`, `d`.`learner_id`, `d`.`payment_method`, `d`.`payment_type`, `d`.`staff_id`, `d.Learner`.`learner_id`, `d.Learner`.`address`, `d.Learner`.`contact_num`, `d.Learner`.`created_at`, `d.Learner`.`dob`, `d.Learner`.`email`, `d.Learner`.`enroll_date`, `d.Learner`.`first_name`, `d.Learner`.`form_url`, `d.Learner`.`g5_certification`, `d.Learner`.`gender`, `d.Learner`.`is_abrsm_g5`, `d.Learner`.`is_active`, `d.Learner`.`is_under_18`, `d.Learner`.`last_name`, `d.Learner`.`learner_level`, `d.Learner`.`level_type`, `d.Learner`.`middle_name`, `d.Learner`.`note`, `d.Learner`.`org_id`, `d.Learner`.`otherfile_url`, `d.Learner`.`payment_period`, `d.Learner`.`photo`, `d.Learner`.`referrer`, `d.Learner`.`referrer_learner_id`, `d.Learner`.`user_id`, `d.Invoice`.`invoice_id`, `d.Invoice`.`begin_date`, `d.Invoice`.`concert_fee`, `d.Invoice`.`concert_fee_name`, `d.Invoice`.`course_instance_id`, `d.Invoice`.`course_name`, `d.Invoice`.`created_at`, `d.Invoice`.`due_date`, `d.Invoice`.`end_date`, `d.Invoice`.`group_course_instance_id`, `d.Invoice`.`invoice_num`, `d.Invoice`.`is_active`, `d.Invoice`.`is_paid`, `d.Invoice`.`learner_id`, `d.Invoice`.`learner_name`, `d.Invoice`.`lesson_fee`, `d.Invoice`.`lesson_note_fee_name`, `d.Invoice`.`lesson_quantity`, `d.Invoice`.`note_fee`, `d.Invoice`.`other1_fee`, `d.Invoice`.`other1_fee_name`, `d.Invoice`.`other2_fee`, `d.Invoice`.`other2_fee_name`, `d.Invoice`.`other3_fee`, `d.Invoice`.`other3_fee_name`, `d.Invoice`.`owing_fee`, `d.Invoice`.`paid_fee`, `d.Invoice`.`term_id`, `d.Invoice`.`total_fee`, `d.Staff`.`staff_id`, `d.Staff`.`dob`, `d.Staff`.`email`, `d.Staff`.`expiry_date`, `d.Staff`.`first_name`, `d.Staff`.`gender`, `d.Staff`.`home_phone`, `d.Staff`.`id_number`, `d.Staff`.`id_photo`, `d.Staff`.`id_type`, `d.Staff`.`ird_number`, `d.Staff`.`is_activate`, `d.Staff`.`last_name`, `d.Staff`.`mobile_phone`, `d.Staff`.`photo`, `d.Staff`.`user_id`, `d.Staff`.`visa`
FROM `ablemusic`.`payment` AS `d`
LEFT JOIN `ablemusic`.`learner` AS `d.Learner` ON `d`.`learner_id` = `d.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice` ON `d`.`invoice_id` = `d.Invoice`.`invoice_id`
LEFT JOIN `ablemusic`.`staff` AS `d.Staff` ON `d`.`staff_id` = `d.Staff`.`staff_id`
WHERE ((`d`.`created_at` > @__8__locals1_beginDate_0) AND (`d`.`created_at` < @__8__locals1_endDate_1)) AND (
    SELECT `s`.`org_id`
    FROM `ablemusic`.`staff_org` AS `s`
    WHERE `d.Staff`.`staff_id` = `s`.`staff_id`
    LIMIT 1
) IN (1)
ORDER BY `d`.`payment_id`
2019-06-27 10:57:18.599 +12:00 [INF] Executed DbCommand (72ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d.SoldTransaction`.`tran_id`, `d.SoldTransaction`.`aflter_quantity`, `d.SoldTransaction`.`amount`, `d.SoldTransaction`.`balance`, `d.SoldTransaction`.`before_quantity`, `d.SoldTransaction`.`created_at`, `d.SoldTransaction`.`discount_amount`, `d.SoldTransaction`.`discount_rate`, `d.SoldTransaction`.`discounted_amount`, `d.SoldTransaction`.`learner_id`, `d.SoldTransaction`.`note`, `d.SoldTransaction`.`payment_id`, `d.SoldTransaction`.`product_id`, `d.SoldTransaction`.`sold_quantity`, `d.SoldTransaction`.`stock_id`, `s.Product`.`product_id`, `s.Product`.`brand`, `s.Product`.`model`, `s.Product`.`prod_type_id`, `s.Product`.`product_name`, `s.Product`.`sell_price`, `s.Product`.`wholesale_price`
FROM `ablemusic`.`sold_transaction` AS `d.SoldTransaction`
LEFT JOIN `ablemusic`.`product` AS `s.Product` ON `d.SoldTransaction`.`product_id` = `s.Product`.`product_id`
INNER JOIN (
    SELECT DISTINCT `d0`.`payment_id`
    FROM `ablemusic`.`payment` AS `d0`
    LEFT JOIN `ablemusic`.`learner` AS `d.Learner0` ON `d0`.`learner_id` = `d.Learner0`.`learner_id`
    LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice0` ON `d0`.`invoice_id` = `d.Invoice0`.`invoice_id`
    LEFT JOIN `ablemusic`.`staff` AS `d.Staff0` ON `d0`.`staff_id` = `d.Staff0`.`staff_id`
    WHERE ((`d0`.`created_at` > @__8__locals1_beginDate_0) AND (`d0`.`created_at` < @__8__locals1_endDate_1)) AND (
        SELECT `s0`.`org_id`
        FROM `ablemusic`.`staff_org` AS `s0`
        WHERE `d.Staff0`.`staff_id` = `s0`.`staff_id`
        LIMIT 1
    ) IN (1)
) AS `t` ON `d.SoldTransaction`.`payment_id` = `t`.`payment_id`
ORDER BY `t`.`payment_id`
2019-06-27 10:57:23.380 +12:00 [INF] Executed action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7618.9993ms.
2019-06-27 10:57:23.387 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-06-27 10:57:23.470 +12:00 [INF] Executed action Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) in 8241.7002000000011ms
2019-06-27 10:57:23.472 +12:00 [INF] Request finished in 8281.4185ms 200 application/json; charset=utf-8
2019-06-27 11:05:37.568 +12:00 [INF] User profile is available. Using 'C:\Users\Learnspace\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-06-27 11:05:38.492 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2019-06-27 11:05:38.525 +12:00 [WRN] Failed to determine the https port for redirect.
2019-06-27 11:05:38.713 +12:00 [INF] Request finished in 223.4205ms 404 
2019-06-27 11:05:52.832 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/PaymentByDate/1/2019-01-01/2019-07-01  
2019-06-27 11:05:52.869 +12:00 [INF] Route matched with {action = "PaymentByDate", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PaymentByDate(Int16, System.DateTime, System.DateTime) on controller Pegasus_backend.Controllers.PaymentController (Pegasus_backend).
2019-06-27 11:05:53.428 +12:00 [INF] Executing action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) - Validation state: "Valid"
2019-06-27 11:05:54.358 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-06-27 11:05:55.737 +12:00 [INF] Executed DbCommand (69ms) [Parameters=[@__8__locals1_staffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`org_id`
FROM `ablemusic`.`staff_org` AS `o`
WHERE `o`.`staff_id` = @__8__locals1_staffId_0
2019-06-27 11:05:55.779 +12:00 [WRN] Query: '(from StaffOrg <generated>_1 in [d].Staff.StaffOrg select [<generated>_1].OrgId).FirstOrDefault()' uses First/FirstOrDefault/Last/LastOrDefault operation without OrderBy and filter which may lead to unpredictable results.
2019-06-27 11:05:55.780 +12:00 [WRN] Query: '(from StaffOrg <generated>_1 in [d].Staff.StaffOrg select [<generated>_1].OrgId).FirstOrDefault()' uses First/FirstOrDefault/Last/LastOrDefault operation without OrderBy and filter which may lead to unpredictable results.
2019-06-27 11:05:56.240 +12:00 [INF] Executed DbCommand (131ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`payment_id`, `d`.`after_balance`, `d`.`amount`, `d`.`before_balance`, `d`.`comment`, `d`.`created_at`, `d`.`invoice_id`, `d`.`is_confirmed`, `d`.`learner_id`, `d`.`payment_method`, `d`.`payment_type`, `d`.`staff_id`, `d.Learner`.`learner_id`, `d.Learner`.`address`, `d.Learner`.`contact_num`, `d.Learner`.`created_at`, `d.Learner`.`dob`, `d.Learner`.`email`, `d.Learner`.`enroll_date`, `d.Learner`.`first_name`, `d.Learner`.`form_url`, `d.Learner`.`g5_certification`, `d.Learner`.`gender`, `d.Learner`.`is_abrsm_g5`, `d.Learner`.`is_active`, `d.Learner`.`is_under_18`, `d.Learner`.`last_name`, `d.Learner`.`learner_level`, `d.Learner`.`level_type`, `d.Learner`.`middle_name`, `d.Learner`.`note`, `d.Learner`.`org_id`, `d.Learner`.`otherfile_url`, `d.Learner`.`payment_period`, `d.Learner`.`photo`, `d.Learner`.`referrer`, `d.Learner`.`referrer_learner_id`, `d.Learner`.`user_id`, `d.Invoice`.`invoice_id`, `d.Invoice`.`begin_date`, `d.Invoice`.`concert_fee`, `d.Invoice`.`concert_fee_name`, `d.Invoice`.`course_instance_id`, `d.Invoice`.`course_name`, `d.Invoice`.`created_at`, `d.Invoice`.`due_date`, `d.Invoice`.`end_date`, `d.Invoice`.`group_course_instance_id`, `d.Invoice`.`invoice_num`, `d.Invoice`.`is_active`, `d.Invoice`.`is_paid`, `d.Invoice`.`learner_id`, `d.Invoice`.`learner_name`, `d.Invoice`.`lesson_fee`, `d.Invoice`.`lesson_note_fee_name`, `d.Invoice`.`lesson_quantity`, `d.Invoice`.`note_fee`, `d.Invoice`.`other1_fee`, `d.Invoice`.`other1_fee_name`, `d.Invoice`.`other2_fee`, `d.Invoice`.`other2_fee_name`, `d.Invoice`.`other3_fee`, `d.Invoice`.`other3_fee_name`, `d.Invoice`.`owing_fee`, `d.Invoice`.`paid_fee`, `d.Invoice`.`term_id`, `d.Invoice`.`total_fee`, `d.Staff`.`staff_id`, `d.Staff`.`dob`, `d.Staff`.`email`, `d.Staff`.`expiry_date`, `d.Staff`.`first_name`, `d.Staff`.`gender`, `d.Staff`.`home_phone`, `d.Staff`.`id_number`, `d.Staff`.`id_photo`, `d.Staff`.`id_type`, `d.Staff`.`ird_number`, `d.Staff`.`is_activate`, `d.Staff`.`last_name`, `d.Staff`.`mobile_phone`, `d.Staff`.`photo`, `d.Staff`.`user_id`, `d.Staff`.`visa`
FROM `ablemusic`.`payment` AS `d`
LEFT JOIN `ablemusic`.`learner` AS `d.Learner` ON `d`.`learner_id` = `d.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice` ON `d`.`invoice_id` = `d.Invoice`.`invoice_id`
LEFT JOIN `ablemusic`.`staff` AS `d.Staff` ON `d`.`staff_id` = `d.Staff`.`staff_id`
WHERE (((`d`.`created_at` > @__8__locals1_beginDate_0) AND (`d`.`created_at` < @__8__locals1_endDate_1)) AND (`d`.`payment_id` > 200)) AND (
    SELECT `s`.`org_id`
    FROM `ablemusic`.`staff_org` AS `s`
    WHERE `d.Staff`.`staff_id` = `s`.`staff_id`
    LIMIT 1
) IN (1)
ORDER BY `d`.`payment_id`
2019-06-27 11:05:56.539 +12:00 [INF] Executed DbCommand (81ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d.SoldTransaction`.`tran_id`, `d.SoldTransaction`.`aflter_quantity`, `d.SoldTransaction`.`amount`, `d.SoldTransaction`.`balance`, `d.SoldTransaction`.`before_quantity`, `d.SoldTransaction`.`created_at`, `d.SoldTransaction`.`discount_amount`, `d.SoldTransaction`.`discount_rate`, `d.SoldTransaction`.`discounted_amount`, `d.SoldTransaction`.`learner_id`, `d.SoldTransaction`.`note`, `d.SoldTransaction`.`payment_id`, `d.SoldTransaction`.`product_id`, `d.SoldTransaction`.`sold_quantity`, `d.SoldTransaction`.`stock_id`, `s.Product`.`product_id`, `s.Product`.`brand`, `s.Product`.`model`, `s.Product`.`prod_type_id`, `s.Product`.`product_name`, `s.Product`.`sell_price`, `s.Product`.`wholesale_price`
FROM `ablemusic`.`sold_transaction` AS `d.SoldTransaction`
LEFT JOIN `ablemusic`.`product` AS `s.Product` ON `d.SoldTransaction`.`product_id` = `s.Product`.`product_id`
INNER JOIN (
    SELECT DISTINCT `d0`.`payment_id`
    FROM `ablemusic`.`payment` AS `d0`
    LEFT JOIN `ablemusic`.`learner` AS `d.Learner0` ON `d0`.`learner_id` = `d.Learner0`.`learner_id`
    LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice0` ON `d0`.`invoice_id` = `d.Invoice0`.`invoice_id`
    LEFT JOIN `ablemusic`.`staff` AS `d.Staff0` ON `d0`.`staff_id` = `d.Staff0`.`staff_id`
    WHERE (((`d0`.`created_at` > @__8__locals1_beginDate_0) AND (`d0`.`created_at` < @__8__locals1_endDate_1)) AND (`d0`.`payment_id` > 200)) AND (
        SELECT `s0`.`org_id`
        FROM `ablemusic`.`staff_org` AS `s0`
        WHERE `d.Staff0`.`staff_id` = `s0`.`staff_id`
        LIMIT 1
    ) IN (1)
) AS `t` ON `d.SoldTransaction`.`payment_id` = `t`.`payment_id`
ORDER BY `t`.`payment_id`
2019-06-27 11:06:04.097 +12:00 [INF] Executed action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10660.621000000001ms.
2019-06-27 11:06:04.105 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-06-27 11:06:04.218 +12:00 [INF] Executed action Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) in 11345.9115ms
2019-06-27 11:06:04.220 +12:00 [INF] Request finished in 11387.5139ms 200 application/json; charset=utf-8
2019-06-27 11:09:15.851 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/PaymentByDate/1/2019-01-01/2019-07-01  
2019-06-27 11:09:15.852 +12:00 [INF] Route matched with {action = "PaymentByDate", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PaymentByDate(Int16, System.DateTime, System.DateTime) on controller Pegasus_backend.Controllers.PaymentController (Pegasus_backend).
2019-06-27 11:09:15.854 +12:00 [INF] Executing action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) - Validation state: "Valid"
2019-06-27 11:09:15.863 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-06-27 11:09:16.557 +12:00 [INF] Executed DbCommand (49ms) [Parameters=[@__8__locals1_staffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`org_id`
FROM `ablemusic`.`staff_org` AS `o`
WHERE `o`.`staff_id` = @__8__locals1_staffId_0
2019-06-27 11:09:16.778 +12:00 [INF] Executed DbCommand (90ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`payment_id`, `d`.`after_balance`, `d`.`amount`, `d`.`before_balance`, `d`.`comment`, `d`.`created_at`, `d`.`invoice_id`, `d`.`is_confirmed`, `d`.`learner_id`, `d`.`payment_method`, `d`.`payment_type`, `d`.`staff_id`, `d.Learner`.`learner_id`, `d.Learner`.`address`, `d.Learner`.`contact_num`, `d.Learner`.`created_at`, `d.Learner`.`dob`, `d.Learner`.`email`, `d.Learner`.`enroll_date`, `d.Learner`.`first_name`, `d.Learner`.`form_url`, `d.Learner`.`g5_certification`, `d.Learner`.`gender`, `d.Learner`.`is_abrsm_g5`, `d.Learner`.`is_active`, `d.Learner`.`is_under_18`, `d.Learner`.`last_name`, `d.Learner`.`learner_level`, `d.Learner`.`level_type`, `d.Learner`.`middle_name`, `d.Learner`.`note`, `d.Learner`.`org_id`, `d.Learner`.`otherfile_url`, `d.Learner`.`payment_period`, `d.Learner`.`photo`, `d.Learner`.`referrer`, `d.Learner`.`referrer_learner_id`, `d.Learner`.`user_id`, `d.Invoice`.`invoice_id`, `d.Invoice`.`begin_date`, `d.Invoice`.`concert_fee`, `d.Invoice`.`concert_fee_name`, `d.Invoice`.`course_instance_id`, `d.Invoice`.`course_name`, `d.Invoice`.`created_at`, `d.Invoice`.`due_date`, `d.Invoice`.`end_date`, `d.Invoice`.`group_course_instance_id`, `d.Invoice`.`invoice_num`, `d.Invoice`.`is_active`, `d.Invoice`.`is_paid`, `d.Invoice`.`learner_id`, `d.Invoice`.`learner_name`, `d.Invoice`.`lesson_fee`, `d.Invoice`.`lesson_note_fee_name`, `d.Invoice`.`lesson_quantity`, `d.Invoice`.`note_fee`, `d.Invoice`.`other1_fee`, `d.Invoice`.`other1_fee_name`, `d.Invoice`.`other2_fee`, `d.Invoice`.`other2_fee_name`, `d.Invoice`.`other3_fee`, `d.Invoice`.`other3_fee_name`, `d.Invoice`.`owing_fee`, `d.Invoice`.`paid_fee`, `d.Invoice`.`term_id`, `d.Invoice`.`total_fee`, `d.Staff`.`staff_id`, `d.Staff`.`dob`, `d.Staff`.`email`, `d.Staff`.`expiry_date`, `d.Staff`.`first_name`, `d.Staff`.`gender`, `d.Staff`.`home_phone`, `d.Staff`.`id_number`, `d.Staff`.`id_photo`, `d.Staff`.`id_type`, `d.Staff`.`ird_number`, `d.Staff`.`is_activate`, `d.Staff`.`last_name`, `d.Staff`.`mobile_phone`, `d.Staff`.`photo`, `d.Staff`.`user_id`, `d.Staff`.`visa`
FROM `ablemusic`.`payment` AS `d`
LEFT JOIN `ablemusic`.`learner` AS `d.Learner` ON `d`.`learner_id` = `d.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice` ON `d`.`invoice_id` = `d.Invoice`.`invoice_id`
LEFT JOIN `ablemusic`.`staff` AS `d.Staff` ON `d`.`staff_id` = `d.Staff`.`staff_id`
WHERE (((`d`.`created_at` > @__8__locals1_beginDate_0) AND (`d`.`created_at` < @__8__locals1_endDate_1)) AND (`d`.`payment_id` > 200)) AND (
    SELECT `s`.`org_id`
    FROM `ablemusic`.`staff_org` AS `s`
    WHERE `d.Staff`.`staff_id` = `s`.`staff_id`
    LIMIT 1
) IN (1)
ORDER BY `d`.`payment_id`
2019-06-27 11:09:16.917 +12:00 [INF] Executed DbCommand (78ms) [Parameters=[@__8__locals1_beginDate_0='?' (DbType = DateTime), @__8__locals1_endDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `d.SoldTransaction`.`tran_id`, `d.SoldTransaction`.`aflter_quantity`, `d.SoldTransaction`.`amount`, `d.SoldTransaction`.`balance`, `d.SoldTransaction`.`before_quantity`, `d.SoldTransaction`.`created_at`, `d.SoldTransaction`.`discount_amount`, `d.SoldTransaction`.`discount_rate`, `d.SoldTransaction`.`discounted_amount`, `d.SoldTransaction`.`learner_id`, `d.SoldTransaction`.`note`, `d.SoldTransaction`.`payment_id`, `d.SoldTransaction`.`product_id`, `d.SoldTransaction`.`sold_quantity`, `d.SoldTransaction`.`stock_id`, `s.Product`.`product_id`, `s.Product`.`brand`, `s.Product`.`model`, `s.Product`.`prod_type_id`, `s.Product`.`product_name`, `s.Product`.`sell_price`, `s.Product`.`wholesale_price`
FROM `ablemusic`.`sold_transaction` AS `d.SoldTransaction`
LEFT JOIN `ablemusic`.`product` AS `s.Product` ON `d.SoldTransaction`.`product_id` = `s.Product`.`product_id`
INNER JOIN (
    SELECT DISTINCT `d0`.`payment_id`
    FROM `ablemusic`.`payment` AS `d0`
    LEFT JOIN `ablemusic`.`learner` AS `d.Learner0` ON `d0`.`learner_id` = `d.Learner0`.`learner_id`
    LEFT JOIN `ablemusic`.`invoice` AS `d.Invoice0` ON `d0`.`invoice_id` = `d.Invoice0`.`invoice_id`
    LEFT JOIN `ablemusic`.`staff` AS `d.Staff0` ON `d0`.`staff_id` = `d.Staff0`.`staff_id`
    WHERE (((`d0`.`created_at` > @__8__locals1_beginDate_0) AND (`d0`.`created_at` < @__8__locals1_endDate_1)) AND (`d0`.`payment_id` > 200)) AND (
        SELECT `s0`.`org_id`
        FROM `ablemusic`.`staff_org` AS `s0`
        WHERE `d.Staff0`.`staff_id` = `s0`.`staff_id`
        LIMIT 1
    ) IN (1)
) AS `t` ON `d.SoldTransaction`.`payment_id` = `t`.`payment_id`
ORDER BY `t`.`payment_id`
2019-06-27 11:09:21.257 +12:00 [INF] Executed action method Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5403.0435000000007ms.
2019-06-27 11:09:21.258 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-06-27 11:09:21.261 +12:00 [INF] Executed action Pegasus_backend.Controllers.PaymentController.PaymentByDate (Pegasus_backend) in 5408.2902ms
2019-06-27 11:09:21.269 +12:00 [INF] Request finished in 5411.2631ms 200 application/json; charset=utf-8
