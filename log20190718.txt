2019-07-18 20:31:48.048 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-07-18 20:31:57.469 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:31:57.505 +12:00 [WRN] Failed to determine the https port for redirect.
2019-07-18 20:31:57.655 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:31:57.794 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:31:58.684 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:32:25.741 +12:00 [ERR] An error occurred using the connection to database 'ablemusic' on server 'gradspace.org'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered during command execution. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered attempting to read the resultset. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Reading from the stream has failed. ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out. ---> System.Net.Sockets.SocketException: Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at MySql.Data.MySqlClient.TimedStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
   at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId)
   at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteScalar()
   at MySql.Data.MySqlClient.Driver.GetTimeZoneOffset(MySqlConnection con)
   at MySql.Data.MySqlClient.Driver.LoadServerProperties(MySqlConnection connection)
   at MySql.Data.MySqlClient.Driver.Configure(MySqlConnection connection)
   at MySql.Data.MySqlClient.MySqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2019-07-18 20:32:25.774 +12:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Pegasus_backend.pegasusContext.ablemusicContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered during command execution. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered attempting to read the resultset. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Reading from the stream has failed. ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out. ---> System.Net.Sockets.SocketException: Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at MySql.Data.MySqlClient.TimedStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
   at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId)
   at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteScalar()
   at MySql.Data.MySqlClient.Driver.GetTimeZoneOffset(MySqlConnection con)
   at MySql.Data.MySqlClient.Driver.LoadServerProperties(MySqlConnection connection)
   at MySql.Data.MySqlClient.Driver.Configure(MySqlConnection connection)
   at MySql.Data.MySqlClient.MySqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered during command execution. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered attempting to read the resultset. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Reading from the stream has failed. ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out. ---> System.Net.Sockets.SocketException: Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at MySql.Data.MySqlClient.TimedStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
   at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId)
   at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteScalar()
   at MySql.Data.MySqlClient.Driver.GetTimeZoneOffset(MySqlConnection con)
   at MySql.Data.MySqlClient.Driver.LoadServerProperties(MySqlConnection connection)
   at MySql.Data.MySqlClient.Driver.Configure(MySqlConnection connection)
   at MySql.Data.MySqlClient.MySqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2019-07-18 20:32:25.777 +12:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Pegasus_backend.pegasusContext.ablemusicContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered during command execution. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered attempting to read the resultset. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Reading from the stream has failed. ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out. ---> System.Net.Sockets.SocketException: Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at MySql.Data.MySqlClient.TimedStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
   at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId)
   at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteScalar()
   at MySql.Data.MySqlClient.Driver.GetTimeZoneOffset(MySqlConnection con)
   at MySql.Data.MySqlClient.Driver.LoadServerProperties(MySqlConnection connection)
   at MySql.Data.MySqlClient.Driver.Configure(MySqlConnection connection)
   at MySql.Data.MySqlClient.MySqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered during command execution. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered attempting to read the resultset. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Reading from the stream has failed. ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out. ---> System.Net.Sockets.SocketException: Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at MySql.Data.MySqlClient.TimedStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
   at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId)
   at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteScalar()
   at MySql.Data.MySqlClient.Driver.GetTimeZoneOffset(MySqlConnection con)
   at MySql.Data.MySqlClient.Driver.LoadServerProperties(MySqlConnection connection)
   at MySql.Data.MySqlClient.Driver.Configure(MySqlConnection connection)
   at MySql.Data.MySqlClient.MySqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
2019-07-18 20:32:25.784 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 27979.035ms.
2019-07-18 20:32:25.792 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:32:25.834 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 28177.028700000003ms
2019-07-18 20:32:25.837 +12:00 [INF] Request finished in 28370.7967ms 400 application/json; charset=utf-8
2019-07-18 20:33:16.856 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:33:16.857 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:33:16.858 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:33:16.859 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:33:17.948 +12:00 [INF] Executed DbCommand (72ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:33:18.183 +12:00 [INF] Executed DbCommand (46ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:33:18.248 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:33:18.248 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:33:18.248 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:33:18.248 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:33:18.248 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:33:18.248 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:33:18.248 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:33:18.248 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:33:18.306 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:33:18.700 +12:00 [INF] Executed DbCommand (211ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, (
    SELECT `z1`.`room_name`
    FROM `ablemusic`.`room` AS `z1`
    WHERE `z1`.`room_id` = (
        SELECT `r1`.`room_id`
        FROM `ablemusic`.`lesson` AS `r1`
        WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z2`.`org_name`
    FROM `ablemusic`.`org` AS `z2`
    WHERE `z2`.`org_id` = (
        SELECT `r2`.`org_id`
        FROM `ablemusic`.`lesson` AS `r2`
        WHERE `r2`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r3`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r3`
    WHERE `r3`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName0`, `s.Org`.`org_name` AS `OrgName0`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:33:19.373 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2513.9946ms.
2019-07-18 20:33:19.374 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:33:19.400 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 2541.7911ms
2019-07-18 20:33:19.400 +12:00 [INF] Request finished in 2543.4185ms 200 application/json; charset=utf-8
2019-07-18 20:34:00.107 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:34:00.108 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:34:00.108 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:34:00.109 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:34:00.393 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:34:00.544 +12:00 [INF] Executed DbCommand (50ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:34:00.562 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:00.562 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:00.563 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:00.563 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:00.563 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:00.563 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:00.563 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:00.563 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:00.584 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:34:00.851 +12:00 [INF] Executed DbCommand (127ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, (
    SELECT `z1`.`room_name`
    FROM `ablemusic`.`room` AS `z1`
    WHERE `z1`.`room_id` = (
        SELECT `r1`.`room_id`
        FROM `ablemusic`.`lesson` AS `r1`
        WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z2`.`org_name`
    FROM `ablemusic`.`org` AS `z2`
    WHERE `z2`.`org_id` = (
        SELECT `r2`.`org_id`
        FROM `ablemusic`.`lesson` AS `r2`
        WHERE `r2`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r3`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r3`
    WHERE `r3`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName0`, `s.Org`.`org_name` AS `OrgName0`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:34:01.755 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1646.3019000000002ms.
2019-07-18 20:34:01.755 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:34:01.755 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 1647.2933ms
2019-07-18 20:34:01.756 +12:00 [INF] Request finished in 1648.1311ms 200 application/json; charset=utf-8
2019-07-18 20:34:03.639 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:34:03.639 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:34:03.640 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:34:03.640 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:34:03.881 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:34:04.023 +12:00 [INF] Executed DbCommand (49ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:34:04.035 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:04.035 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:04.036 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:04.036 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:04.036 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:04.036 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:04.036 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:04.036 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:04.054 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:34:04.270 +12:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, (
    SELECT `z1`.`room_name`
    FROM `ablemusic`.`room` AS `z1`
    WHERE `z1`.`room_id` = (
        SELECT `r1`.`room_id`
        FROM `ablemusic`.`lesson` AS `r1`
        WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z2`.`org_name`
    FROM `ablemusic`.`org` AS `z2`
    WHERE `z2`.`org_id` = (
        SELECT `r2`.`org_id`
        FROM `ablemusic`.`lesson` AS `r2`
        WHERE `r2`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r3`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r3`
    WHERE `r3`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName0`, `s.Org`.`org_name` AS `OrgName0`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:34:06.940 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3300.1148000000003ms.
2019-07-18 20:34:06.940 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:34:06.940 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 3301.0575000000003ms
2019-07-18 20:34:06.941 +12:00 [INF] Request finished in 3301.7975ms 200 application/json; charset=utf-8
2019-07-18 20:34:36.998 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:34:36.998 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:34:36.999 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:34:36.999 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:34:37.501 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:34:37.653 +12:00 [INF] Executed DbCommand (51ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:34:37.664 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:37.665 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:37.665 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:37.665 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:37.665 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:37.665 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:37.665 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:37.665 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:34:37.681 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:34:37.887 +12:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, (
    SELECT `z1`.`room_name`
    FROM `ablemusic`.`room` AS `z1`
    WHERE `z1`.`room_id` = (
        SELECT `r1`.`room_id`
        FROM `ablemusic`.`lesson` AS `r1`
        WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z2`.`org_name`
    FROM `ablemusic`.`org` AS `z2`
    WHERE `z2`.`org_id` = (
        SELECT `r2`.`org_id`
        FROM `ablemusic`.`lesson` AS `r2`
        WHERE `r2`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r3`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r3`
    WHERE `r3`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName0`, `s.Org`.`org_name` AS `OrgName0`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:34:40.936 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3937.3833ms.
2019-07-18 20:34:40.937 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:34:40.937 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 3938.4218ms
2019-07-18 20:34:40.937 +12:00 [INF] Request finished in 3939.0839ms 200 application/json; charset=utf-8
2019-07-18 20:35:17.165 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-07-18 20:35:20.093 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:35:20.121 +12:00 [WRN] Failed to determine the https port for redirect.
2019-07-18 20:35:20.252 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:35:20.375 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:35:21.269 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:35:22.488 +12:00 [INF] Executed DbCommand (73ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:35:22.722 +12:00 [INF] Executed DbCommand (50ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:35:22.773 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:22.774 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:22.774 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:22.774 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:22.775 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:22.775 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:22.775 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:22.775 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:22.836 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:35:23.144 +12:00 [INF] Executed DbCommand (137ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, (
    SELECT `z1`.`room_name`
    FROM `ablemusic`.`room` AS `z1`
    WHERE `z1`.`room_id` = (
        SELECT `r1`.`room_id`
        FROM `ablemusic`.`lesson` AS `r1`
        WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z2`.`org_name`
    FROM `ablemusic`.`org` AS `z2`
    WHERE `z2`.`org_id` = (
        SELECT `r2`.`org_id`
        FROM `ablemusic`.`lesson` AS `r2`
        WHERE `r2`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r3`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r3`
    WHERE `r3`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName0`, `s.Org`.`org_name` AS `OrgName0`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:35:23.920 +12:00 [INF] Executed DbCommand (72ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:35:24.080 +12:00 [INF] Executed DbCommand (58ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:35:24.250 +12:00 [INF] Executed DbCommand (59ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:35:24.420 +12:00 [INF] Executed DbCommand (68ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:35:24.442 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4054.9350000000004ms.
2019-07-18 20:35:24.448 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:35:24.509 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 4254.9993ms
2019-07-18 20:35:24.512 +12:00 [INF] Request finished in 4420.7863ms 200 application/json; charset=utf-8
2019-07-18 20:35:26.274 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:35:26.275 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:35:26.276 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:35:26.277 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:35:26.768 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:35:26.923 +12:00 [INF] Executed DbCommand (51ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:35:26.939 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:26.939 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:26.939 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:26.939 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:26.939 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:26.939 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:26.939 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:26.940 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:35:26.958 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:35:27.153 +12:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, (
    SELECT `z1`.`room_name`
    FROM `ablemusic`.`room` AS `z1`
    WHERE `z1`.`room_id` = (
        SELECT `r1`.`room_id`
        FROM `ablemusic`.`lesson` AS `r1`
        WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z2`.`org_name`
    FROM `ablemusic`.`org` AS `z2`
    WHERE `z2`.`org_id` = (
        SELECT `r2`.`org_id`
        FROM `ablemusic`.`lesson` AS `r2`
        WHERE `r2`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r3`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r3`
    WHERE `r3`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName0`, `s.Org`.`org_name` AS `OrgName0`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:35:28.438 +12:00 [INF] Executed DbCommand (63ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:35:28.599 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:35:28.769 +12:00 [INF] Executed DbCommand (59ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:35:28.930 +12:00 [INF] Executed DbCommand (58ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:35:28.948 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2671.7386ms.
2019-07-18 20:35:28.948 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:35:28.949 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 2673.8376000000003ms
2019-07-18 20:35:28.949 +12:00 [INF] Request finished in 2675.3479ms 200 application/json; charset=utf-8
2019-07-18 20:35:56.598 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-07-18 20:36:05.311 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:36:05.338 +12:00 [WRN] Failed to determine the https port for redirect.
2019-07-18 20:36:05.470 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:36:05.589 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:36:06.499 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:36:07.446 +12:00 [INF] Executed DbCommand (65ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:36:07.680 +12:00 [INF] Executed DbCommand (49ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:36:07.732 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:07.733 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:07.734 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:07.734 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:07.734 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:07.734 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:07.734 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:07.734 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:07.790 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:36:08.028 +12:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName`, `s.Org`.`org_name` AS `OrgName`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:36:08.738 +12:00 [INF] Executed DbCommand (55ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:08.896 +12:00 [INF] Executed DbCommand (53ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:09.062 +12:00 [INF] Executed DbCommand (63ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:09.216 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:09.241 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3639.0642000000003ms.
2019-07-18 20:36:09.248 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:36:09.309 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 3836.6678ms
2019-07-18 20:36:09.312 +12:00 [INF] Request finished in 4002.7161ms 200 application/json; charset=utf-8
2019-07-18 20:36:12.049 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:36:12.050 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:36:12.051 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:36:12.052 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:36:12.546 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:36:12.699 +12:00 [INF] Executed DbCommand (50ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:36:12.713 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:12.713 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:12.713 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:12.713 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:12.713 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:12.714 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:12.714 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:12.714 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:12.731 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:36:12.920 +12:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName`, `s.Org`.`org_name` AS `OrgName`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:36:13.802 +12:00 [INF] Executed DbCommand (63ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:13.966 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:14.129 +12:00 [INF] Executed DbCommand (59ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:14.286 +12:00 [INF] Executed DbCommand (54ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:14.305 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2253.9524ms.
2019-07-18 20:36:14.306 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:36:14.306 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 2256.0337ms
2019-07-18 20:36:14.307 +12:00 [INF] Request finished in 2257.3946ms 200 application/json; charset=utf-8
2019-07-18 20:36:16.398 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:36:16.398 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:36:16.399 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:36:16.399 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:36:16.696 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:36:16.867 +12:00 [INF] Executed DbCommand (68ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:36:16.881 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:16.881 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:16.881 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:16.881 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:16.881 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:16.881 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:16.881 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:16.882 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:36:16.898 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:36:17.080 +12:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName`, `s.Org`.`org_name` AS `OrgName`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:36:19.684 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:19.836 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:19.996 +12:00 [INF] Executed DbCommand (56ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:20.157 +12:00 [INF] Executed DbCommand (58ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:36:20.170 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3771.0724ms.
2019-07-18 20:36:20.170 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:36:20.170 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 3772.0203ms
2019-07-18 20:36:20.170 +12:00 [INF] Request finished in 3772.6801ms 200 application/json; charset=utf-8
2019-07-18 20:38:14.192 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-07-18 20:38:17.955 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:38:17.983 +12:00 [WRN] Failed to determine the https port for redirect.
2019-07-18 20:38:18.113 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:38:18.238 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:38:19.125 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:38:20.053 +12:00 [INF] Executed DbCommand (62ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:38:20.278 +12:00 [INF] Executed DbCommand (50ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:38:20.329 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:38:20.330 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:38:20.331 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:38:20.331 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:38:20.331 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:38:20.331 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:38:20.331 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:38:20.331 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:38:20.389 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:38:20.630 +12:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName`, `s.Org`.`org_name` AS `OrgName`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:38:21.406 +12:00 [INF] Executed DbCommand (54ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:38:21.566 +12:00 [INF] Executed DbCommand (55ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:38:21.724 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:38:21.884 +12:00 [INF] Executed DbCommand (56ms) [Parameters=[@_outer_GroupCourseInstanceId='?' (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_group_course_id`, `l`.`begin_date`, `l`.`comment`, `l`.`created_at`, `l`.`end_date`, `l`.`group_course_instance_id`, `l`.`invoice_date`, `l`.`is_activate`, `l`.`learner_id`
FROM `ablemusic`.`learner_group_course` AS `l`
WHERE @_outer_GroupCourseInstanceId = `l`.`group_course_instance_id`
2019-07-18 20:38:21.907 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3657.6628ms.
2019-07-18 20:38:21.913 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:38:21.972 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 3856.1286ms
2019-07-18 20:38:21.975 +12:00 [INF] Request finished in 4021.3645ms 200 application/json; charset=utf-8
2019-07-18 20:39:59.665 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-07-18 20:40:10.241 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-07-18 20:40:12.304 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:40:12.339 +12:00 [WRN] Failed to determine the https port for redirect.
2019-07-18 20:40:12.481 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:40:12.599 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:40:13.476 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:40:15.461 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:40:15.696 +12:00 [INF] Executed DbCommand (50ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:40:15.747 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:15.748 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:15.748 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:15.749 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:15.749 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:15.749 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:15.749 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:15.749 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:15.803 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:40:16.053 +12:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName`, `s.Org`.`org_name` AS `OrgName`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:40:16.803 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4192.9129ms.
2019-07-18 20:40:16.808 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:40:16.864 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 4379.7224000000006ms
2019-07-18 20:40:16.867 +12:00 [INF] Request finished in 4564.4313ms 200 application/json; charset=utf-8
2019-07-18 20:40:40.325 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:40:40.326 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:40:40.327 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:40:40.329 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:40:40.480 +12:00 [INF] Executed DbCommand (50ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:40:40.642 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:40:40.656 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:40.656 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:40.656 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:40.657 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:40.657 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:40.657 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:40.657 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:40.657 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:40.675 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:40:40.876 +12:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName`, `s.Org`.`org_name` AS `OrgName`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:40:42.808 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2480.0185ms.
2019-07-18 20:40:42.809 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:40:42.809 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 2482.7585ms
2019-07-18 20:40:42.810 +12:00 [INF] Request finished in 2484.9122ms 200 application/json; charset=utf-8
2019-07-18 20:40:44.030 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:40:44.030 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:40:44.031 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:40:44.031 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:40:44.246 +12:00 [INF] Executed DbCommand (66ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:40:44.401 +12:00 [INF] Executed DbCommand (50ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:40:44.412 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:44.412 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:44.413 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:44.413 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:44.413 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:44.413 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:44.413 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:44.413 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:40:44.430 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:40:44.628 +12:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, `s`.`reason`, CASE
    WHEN `s`.`is_paid` = 1
    THEN 0 ELSE 1
END, CASE
    WHEN (
        SELECT `q1`.`quantity`
        FROM `ablemusic`.`lesson_remain` AS `q1`
        WHERE ((`q1`.`learner_id` = `s`.`learner_id`) OR (`q1`.`learner_id` IS NULL AND `s`.`learner_id` IS NULL)) AND ((`q1`.`course_instance_id` = `s`.`course_instance_id`) OR (`q1`.`course_instance_id` IS NULL AND `s`.`course_instance_id` IS NULL))
        LIMIT 1
    ) <= 3
    THEN 1 ELSE 0
END, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName`, `s.Org`.`org_name` AS `OrgName`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:40:47.172 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3141.3017ms.
2019-07-18 20:40:47.172 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:40:47.173 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 3142.1963ms
2019-07-18 20:40:47.173 +12:00 [INF] Request finished in 3142.8548ms 200 application/json; charset=utf-8
2019-07-18 20:41:14.879 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-07-18 20:41:16.455 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:41:16.482 +12:00 [WRN] Failed to determine the https port for redirect.
2019-07-18 20:41:16.614 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:41:16.731 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:41:17.592 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:41:18.511 +12:00 [INF] Executed DbCommand (82ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:41:18.739 +12:00 [INF] Executed DbCommand (50ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:41:18.784 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:18.786 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:18.786 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:18.786 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:18.786 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:18.786 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:18.786 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:18.786 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:18.843 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:41:19.085 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, `s`.`reason`, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName`, `s.Org`.`org_name` AS `OrgName`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:41:19.712 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2970.7433ms.
2019-07-18 20:41:19.718 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:41:19.776 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 3159.7766ms
2019-07-18 20:41:19.780 +12:00 [INF] Request finished in 3325.9814ms 200 application/json; charset=utf-8
2019-07-18 20:41:21.628 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:41:21.629 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:41:21.630 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:41:21.631 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:41:21.797 +12:00 [INF] Executed DbCommand (57ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:41:21.959 +12:00 [INF] Executed DbCommand (47ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:41:21.969 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:21.969 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:21.970 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:21.970 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:21.970 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:21.970 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:21.970 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:21.970 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:41:21.988 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:41:22.180 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, `s`.`reason`, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName`, `s.Org`.`org_name` AS `OrgName`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:41:23.383 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1753.1573ms.
2019-07-18 20:41:23.384 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:41:23.384 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 1755.2620000000002ms
2019-07-18 20:41:23.385 +12:00 [INF] Request finished in 1756.8422ms 200 application/json; charset=utf-8
2019-07-18 20:42:32.535 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-07-18 20:42:34.200 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:42:34.227 +12:00 [WRN] Failed to determine the https port for redirect.
2019-07-18 20:42:34.367 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:42:34.489 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:42:35.400 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:42:36.312 +12:00 [INF] Executed DbCommand (71ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:42:36.546 +12:00 [INF] Executed DbCommand (49ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:42:36.599 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:36.601 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:36.601 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:36.601 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:36.601 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:36.601 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:36.601 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:36.601 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:36.655 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:42:36.918 +12:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, (
    SELECT `z1`.`room_name`
    FROM `ablemusic`.`room` AS `z1`
    WHERE `z1`.`room_id` = (
        SELECT `r1`.`room_id`
        FROM `ablemusic`.`lesson` AS `r1`
        WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z2`.`org_name`
    FROM `ablemusic`.`org` AS `z2`
    WHERE `z2`.`org_id` = (
        SELECT `r2`.`org_id`
        FROM `ablemusic`.`lesson` AS `r2`
        WHERE `r2`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r3`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r3`
    WHERE `r3`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`, `s`.`reason`, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName0`, `s.Org`.`org_name` AS `OrgName0`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:42:37.555 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3054.2546ms.
2019-07-18 20:42:37.561 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:42:37.621 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 3252.2498ms
2019-07-18 20:42:37.625 +12:00 [INF] Request finished in 3425.9767ms 200 application/json; charset=utf-8
2019-07-18 20:42:39.179 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:42:39.179 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:42:39.180 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:42:39.181 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:42:39.407 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:42:39.566 +12:00 [INF] Executed DbCommand (50ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:42:39.580 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:39.580 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:39.581 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:39.581 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:39.581 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:39.581 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:39.581 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:39.581 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:39.601 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:42:39.808 +12:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, (
    SELECT `z1`.`room_name`
    FROM `ablemusic`.`room` AS `z1`
    WHERE `z1`.`room_id` = (
        SELECT `r1`.`room_id`
        FROM `ablemusic`.`lesson` AS `r1`
        WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z2`.`org_name`
    FROM `ablemusic`.`org` AS `z2`
    WHERE `z2`.`org_id` = (
        SELECT `r2`.`org_id`
        FROM `ablemusic`.`lesson` AS `r2`
        WHERE `r2`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r3`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r3`
    WHERE `r3`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`, `s`.`reason`, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName0`, `s.Org`.`org_name` AS `OrgName0`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:42:41.004 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1823.7496ms.
2019-07-18 20:42:41.005 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:42:41.005 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 1825.5874000000001ms
2019-07-18 20:42:41.005 +12:00 [INF] Request finished in 1826.9596ms 200 application/json; charset=utf-8
2019-07-18 20:42:42.233 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-16  
2019-07-18 20:42:42.234 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend)
2019-07-18 20:42:42.234 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) with arguments (["3","07/16/2019 00:00:00"]) - Validation state: "Valid"
2019-07-18 20:42:42.235 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-18 20:42:42.425 +12:00 [INF] Executed DbCommand (59ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-18 20:42:42.576 +12:00 [INF] Executed DbCommand (50ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-18 20:42:42.590 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:42.590 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:42.590 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:42.591 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:42.591 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:42.591 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:42.591 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:42.591 +12:00 [WRN] The Include operation for navigation '[s].AwaitMakeUpLessonNewLesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-18 20:42:42.608 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-18 20:42:42.804 +12:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherFirstName0`, `s`.`is_canceled` AS `IsCanceled`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, (
    SELECT `z`.`first_name`
    FROM `ablemusic`.`teacher` AS `z`
    WHERE `z`.`teacher_id` = (
        SELECT `r`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherFirstName`, (
    SELECT `z0`.`last_name`
    FROM `ablemusic`.`teacher` AS `z0`
    WHERE `z0`.`teacher_id` = (
        SELECT `r0`.`teacher_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `TeacherLastName`, (
    SELECT `z1`.`room_name`
    FROM `ablemusic`.`room` AS `z1`
    WHERE `z1`.`room_id` = (
        SELECT `r1`.`room_id`
        FROM `ablemusic`.`lesson` AS `r1`
        WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z2`.`org_name`
    FROM `ablemusic`.`org` AS `z2`
    WHERE `z2`.`org_id` = (
        SELECT `r2`.`org_id`
        FROM `ablemusic`.`lesson` AS `r2`
        WHERE `r2`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r3`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r3`
    WHERE `r3`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`, `s`.`reason`, `s.Learner`.`first_name` AS `FirstName`, `s`.`learner_id` AS `LearnerId`, `s.Room`.`room_name` AS `RoomName0`, `s.Org`.`org_name` AS `OrgName0`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId0`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
2019-07-18 20:42:44.860 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2626.0984000000003ms.
2019-07-18 20:42:44.861 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-18 20:42:44.861 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 2627.4051ms
2019-07-18 20:42:44.862 +12:00 [INF] Request finished in 2628.16ms 200 application/json; charset=utf-8
