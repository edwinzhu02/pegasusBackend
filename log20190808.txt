<<<<<<< HEAD
2019-08-08 11:11:53.590 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-08-08 11:11:54.085 +12:00 [INF] Setting up the time host service. Everyday run at 23pm
2019-08-08 11:12:31.567 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/TeacherGetRating/1 application/json 72
2019-08-08 11:12:31.617 +12:00 [WRN] Failed to determine the https port for redirect.
2019-08-08 11:12:31.679 +12:00 [INF] {
	"UserId": 3,
	"LocaltionX": -36.9128580,
	"LocaltionY": 174.8736460
}
2019-08-08 11:12:31.822 +12:00 [INF] Response 
2019-08-08 11:12:31.827 +12:00 [INF] Request finished in 261.8763ms 404 
2019-08-08 11:12:44.676 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/rating/TeacherGetRating/1 application/json 72
2019-08-08 11:12:44.677 +12:00 [INF] {
	"UserId": 3,
	"LocaltionX": -36.9128580,
	"LocaltionY": 174.8736460
}
2019-08-08 11:12:44.705 +12:00 [INF] Route matched with {action = "TeacherGetRating", controller = "Rating"}. Executing action Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend)
2019-08-08 11:12:44.755 +12:00 [INF] Executing action method Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend) with arguments (["1"]) - Validation state: "Valid"
2019-08-08 11:12:45.684 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-08-08 11:12:46.594 +12:00 [INF] Executed DbCommand (58ms) [Parameters=[@__teacherId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`rating_id`, `s`.`comment`, `s`.`create_at`, `s`.`learner_id`, `s`.`lesson_id`, `s`.`rate_star`, `s`.`rate_type`, `s`.`teacher_id`
FROM `ablemusic`.`rating` AS `s`
WHERE (`s`.`teacher_id` = @__teacherId_0) AND (`s`.`rate_type` = 0)
2019-08-08 11:12:46.652 +12:00 [INF] Executed action method Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1885.2903000000001ms.
2019-08-08 11:12:46.658 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-08-08 11:12:46.710 +12:00 [INF] Executed action Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend) in 2002.6568000000002ms
2019-08-08 11:12:46.710 +12:00 [INF] Response {"IsSuccess":true,"ErrorCode":null,"IsFound":true,"ErrorMessage":null,"Note":null,"Data":[{"RatingId":1,"RateType":0,"Comment":"aaa","CreateAt":null,"LearnerId":1,"TeacherId":1,"LessonId":1,"RateStar":1,"Learner":null,"Lesson":null,"Teacher":null}]}
2019-08-08 11:12:46.713 +12:00 [INF] Request finished in 2036.9071ms 200 application/json; charset=utf-8
2019-08-08 11:14:55.938 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-08-08 11:14:56.311 +12:00 [INF] Setting up the time host service. Everyday run at 23pm
2019-08-08 11:14:59.888 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/rating/TeacherGetRating/1 application/json 72
2019-08-08 11:14:59.920 +12:00 [WRN] Failed to determine the https port for redirect.
2019-08-08 11:14:59.964 +12:00 [INF] {
	"UserId": 3,
	"LocaltionX": -36.9128580,
	"LocaltionY": 174.8736460
}
2019-08-08 11:15:00.112 +12:00 [INF] Route matched with {action = "TeacherGetRating", controller = "Rating"}. Executing action Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend)
2019-08-08 11:15:00.163 +12:00 [INF] Executing action method Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend) with arguments (["1"]) - Validation state: "Valid"
2019-08-08 11:15:01.071 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-08-08 11:15:01.110 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-08-08 11:15:01.112 +12:00 [WRN] The Include operation for navigation '[s].Lesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-08-08 11:15:01.999 +12:00 [INF] Executed DbCommand (62ms) [Parameters=[@__teacherId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s.Learner`.`first_name` AS `FirstName`, `s.Learner`.`last_name` AS `LastName`, `s.Lesson`.`begin_time` AS `BeginTime`, `s`.`comment`, `s`.`rate_star` AS `RateStar`
FROM `ablemusic`.`rating` AS `s`
LEFT JOIN `ablemusic`.`lesson` AS `s.Lesson` ON `s`.`lesson_id` = `s.Lesson`.`lesson_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
WHERE (`s`.`teacher_id` = @__teacherId_0) AND (`s`.`rate_type` = 0)
2019-08-08 11:15:02.025 +12:00 [INF] Executed action method Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1849.6686000000002ms.
2019-08-08 11:15:02.031 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-08-08 11:15:02.071 +12:00 [INF] Executed action Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend) in 1956.7769ms
2019-08-08 11:15:02.073 +12:00 [INF] Response {"IsSuccess":true,"ErrorCode":null,"IsFound":true,"ErrorMessage":null,"Note":null,"Data":[{"FirstName":"Oliver","LastName":"Deng","BeginTime":"2019-05-02T13:00:00","Comment":"aaa","RateStar":1}]}
2019-08-08 11:15:02.078 +12:00 [INF] Request finished in 2191.2889ms 200 application/json; charset=utf-8
=======
2019-08-08 09:59:33.813 +12:00 [INF] User profile is available. Using 'C:\Users\zhuyi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-08-08 09:59:35.262 +12:00 [INF] Setting up the time host service. Everyday run at 23pm
2019-08-08 09:59:37.143 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2019-08-08 09:59:37.215 +12:00 [WRN] Failed to determine the https port for redirect.
2019-08-08 09:59:37.474 +12:00 [INF] 
2019-08-08 09:59:38.266 +12:00 [INF] Response 
2019-08-08 09:59:38.279 +12:00 [INF] Request finished in 1138.918ms 404 
2019-08-08 10:00:07.091 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Dashboard/1  
2019-08-08 10:00:07.098 +12:00 [INF] 
2019-08-08 10:00:07.134 +12:00 [INF] Route matched with {action = "Get", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String) on controller Pegasus_backend.Controllers.DashboardController (Pegasus_backend).
2019-08-08 10:00:07.326 +12:00 [INF] Executing action method Pegasus_backend.Controllers.DashboardController.Get (Pegasus_backend) - Validation state: "Valid"
2019-08-08 10:00:13.728 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-08-08 10:17:09.456 +12:00 [WRN] The LINQ expression 'where ((([l].BeginTime != null) AndAlso (Convert([l].BeginTime, DateTime).Date == ___today_Date_0)) AndAlso {___orgIds_1 => Contains(Convert([l].OrgId, Int32))})' could not be translated and will be evaluated locally.
2019-08-08 10:17:09.469 +12:00 [WRN] The LINQ expression 'Contains(Convert([l].OrgId, Int32))' could not be translated and will be evaluated locally.
2019-08-08 10:17:10.911 +12:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lesson_id`, `l`.`begin_time`, `l`.`course_instance_id`, `l`.`created_at`, `l`.`end_time`, `l`.`group_course_instance_id`, `l`.`invoice_num`, `l`.`is_canceled`, `l`.`is_changed`, `l`.`is_confirm`, `l`.`is_paid`, `l`.`is_trial`, `l`.`learner_id`, `l`.`new_lesson_id`, `l`.`org_id`, `l`.`reason`, `l`.`room_id`, `l`.`teacher_id`, `l`.`trial_course_id`
FROM `ablemusic`.`lesson` AS `l`
WHERE (`l`.`is_canceled` <> 1) OR `l`.`is_canceled` IS NULL
2019-08-08 10:17:11.256 +12:00 [WRN] The LINQ expression 'where (((([l].BeginTime != null) AndAlso (Convert([l].BeginTime, DateTime).Date == ___today_Date_0)) AndAlso (Convert([l].IsTrial, Nullable`1) == 1)) AndAlso {___orgIds_1 => Contains(Convert([l].OrgId, Int32))})' could not be translated and will be evaluated locally.
2019-08-08 10:17:11.257 +12:00 [WRN] The LINQ expression 'Contains(Convert([l].OrgId, Int32))' could not be translated and will be evaluated locally.
2019-08-08 10:17:11.510 +12:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lesson_id`, `l`.`begin_time`, `l`.`course_instance_id`, `l`.`created_at`, `l`.`end_time`, `l`.`group_course_instance_id`, `l`.`invoice_num`, `l`.`is_canceled`, `l`.`is_changed`, `l`.`is_confirm`, `l`.`is_paid`, `l`.`is_trial`, `l`.`learner_id`, `l`.`new_lesson_id`, `l`.`org_id`, `l`.`reason`, `l`.`room_id`, `l`.`teacher_id`, `l`.`trial_course_id`
FROM `ablemusic`.`lesson` AS `l`
WHERE (`l`.`is_canceled` <> 1) OR `l`.`is_canceled` IS NULL
2019-08-08 10:17:11.870 +12:00 [WRN] The LINQ expression 'where (([l].EnrollDate != null) AndAlso (___today_Date_0 == Convert([l].EnrollDate, DateTime).Date))' could not be translated and will be evaluated locally.
2019-08-08 10:17:12.453 +12:00 [INF] Executed DbCommand (380ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_id`, `l`.`address`, `l`.`comment`, `l`.`contact_num`, `l`.`created_at`, `l`.`dob`, `l`.`email`, `l`.`enroll_date`, `l`.`first_name`, `l`.`form_url`, `l`.`g5_certification`, `l`.`gender`, `l`.`is_abrsm_g5`, `l`.`is_active`, `l`.`is_under_18`, `l`.`last_name`, `l`.`learner_level`, `l`.`level_type`, `l`.`middle_name`, `l`.`note`, `l`.`org_id`, `l`.`otherfile_url`, `l`.`payment_period`, `l`.`photo`, `l`.`referrer`, `l`.`referrer_learner_id`, `l`.`user_id`
FROM `ablemusic`.`learner` AS `l`
WHERE `l`.`org_id` IN (1)
2019-08-08 10:17:12.815 +12:00 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `w`.`waiting_id`, `w`.`begin_date`, `w`.`comment`, `w`.`concert_fee`, `w`.`concert_fee_name`, `w`.`course_instance_id`, `w`.`course_name`, `w`.`created_at`, `w`.`due_date`, `w`.`end_date`, `w`.`group_course_instance_id`, `w`.`invoice_num`, `w`.`is_activate`, `w`.`is_confirmed`, `w`.`is_email_sent`, `w`.`is_paid`, `w`.`learner_id`, `w`.`learner_name`, `w`.`lesson_fee`, `w`.`lesson_note_fee_name`, `w`.`lesson_quantity`, `w`.`note_fee`, `w`.`other1_fee`, `w`.`other1_fee_name`, `w`.`other2_fee`, `w`.`other2_fee_name`, `w`.`other3_fee`, `w`.`other3_fee_name`, `w`.`owing_fee`, `w`.`paid_fee`, `w`.`term_id`, `w`.`total_fee`
FROM `ablemusic`.`invoice_waiting_confirm` AS `w`
INNER JOIN `ablemusic`.`learner` AS `l` ON `w`.`learner_id` = `l`.`learner_id`
WHERE `l`.`org_id` IN (1) AND (`w`.`is_confirmed` = 0)
2019-08-08 10:17:13.020 +12:00 [WRN] The LINQ expression 'where (Convert([l].BeginTime, DateTime).Date == ___today_Date_1)' could not be translated and will be evaluated locally.
2019-08-08 10:17:13.377 +12:00 [INF] Executed DbCommand (128ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lesson_id`, `l`.`begin_time`, `l`.`course_instance_id`, `l`.`created_at`, `l`.`end_time`, `l`.`group_course_instance_id`, `l`.`invoice_num`, `l`.`is_canceled`, `l`.`is_changed`, `l`.`is_confirm`, `l`.`is_paid`, `l`.`is_trial`, `l`.`learner_id`, `l`.`new_lesson_id`, `l`.`org_id`, `l`.`reason`, `l`.`room_id`, `l`.`teacher_id`, `l`.`trial_course_id`
FROM `ablemusic`.`lesson` AS `l`
WHERE (`l`.`begin_time` IS NOT NULL AND (`l`.`is_canceled` = 1)) AND `l`.`org_id` IN (1)
2019-08-08 10:17:13.432 +12:00 [WRN] The LINQ expression 'where (Convert([l].BeginTime, DateTime).Date == ___today_Date_1)' could not be translated and will be evaluated locally.
2019-08-08 10:17:14.082 +12:00 [INF] Executed DbCommand (373ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lesson_id`, `l`.`begin_time`, `l`.`course_instance_id`, `l`.`created_at`, `l`.`end_time`, `l`.`group_course_instance_id`, `l`.`invoice_num`, `l`.`is_canceled`, `l`.`is_changed`, `l`.`is_confirm`, `l`.`is_paid`, `l`.`is_trial`, `l`.`learner_id`, `l`.`new_lesson_id`, `l`.`org_id`, `l`.`reason`, `l`.`room_id`, `l`.`teacher_id`, `l`.`trial_course_id`
FROM `ablemusic`.`lesson` AS `l`
WHERE ((`l`.`begin_time` IS NOT NULL AND `l`.`org_id` IN (1)) AND ((`l`.`is_canceled` <> 1) OR `l`.`is_canceled` IS NULL)) AND (`l`.`is_changed` = 1)
2019-08-08 10:17:14.090 +12:00 [WRN] The LINQ expression 'where ((([a].EndDate != null) AndAlso (Convert([a].AmendType, Nullable`1) == 1)) AndAlso (___today_Date_0 == Convert([a].EndDate, DateTime).Date))' could not be translated and will be evaluated locally.
2019-08-08 10:17:14.691 +12:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`amendment_id`, `a`.`amend_type`, `a`.`begin_date`, `a`.`begin_time`, `a`.`course_instance_id`, `a`.`course_schedule_id`, `a`.`created_at`, `a`.`day_of_week`, `a`.`end_date`, `a`.`end_time`, `a`.`is_temporary`, `a`.`learner_id`, `a`.`org_id`, `a`.`reason`, `a`.`room_id`, `a`.`teacher_id`
FROM `ablemusic`.`amendment` AS `a`
WHERE `a`.`org_id` IN (1)
2019-08-08 10:17:14.712 +12:00 [WRN] The LINQ expression 'where ((([a].EndDate != null) AndAlso (Convert([a].AmendType, Nullable`1) == 2)) AndAlso (___today_Date_0 == Convert([a].EndDate, DateTime).Date))' could not be translated and will be evaluated locally.
2019-08-08 10:17:15.606 +12:00 [INF] Executed DbCommand (407ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`amendment_id`, `a`.`amend_type`, `a`.`begin_date`, `a`.`begin_time`, `a`.`course_instance_id`, `a`.`course_schedule_id`, `a`.`created_at`, `a`.`day_of_week`, `a`.`end_date`, `a`.`end_time`, `a`.`is_temporary`, `a`.`learner_id`, `a`.`org_id`, `a`.`reason`, `a`.`room_id`, `a`.`teacher_id`
FROM `ablemusic`.`amendment` AS `a`
WHERE `a`.`org_id` IN (1)
2019-08-08 10:17:42.240 +12:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lesson_id`, `l`.`begin_time`, `l`.`course_instance_id`, `l`.`created_at`, `l`.`end_time`, `l`.`group_course_instance_id`, `l`.`invoice_num`, `l`.`is_canceled`, `l`.`is_changed`, `l`.`is_confirm`, `l`.`is_paid`, `l`.`is_trial`, `l`.`learner_id`, `l`.`new_lesson_id`, `l`.`org_id`, `l`.`reason`, `l`.`room_id`, `l`.`teacher_id`, `l`.`trial_course_id`
FROM `ablemusic`.`lesson` AS `l`
WHERE (`l`.`is_canceled` <> 1) OR `l`.`is_canceled` IS NULL
2019-08-08 10:17:49.195 +12:00 [INF] Executed action Pegasus_backend.Controllers.DashboardController.Get (Pegasus_backend) in 1062059.1024ms
2019-08-08 10:17:49.198 +12:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at Pegasus_backend.Services.DashboardService.getLearnerWithRemainLessonsForToday(Int32 numOfRemainLesson) in c:\source\pegasusBackend\Services\DashboardService.cs:line 199
   at Pegasus_backend.Controllers.DashboardController.Get(String orgIDsStr) in c:\source\pegasusBackend\Controllers\DashboardController.cs:line 45
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.Invoke(HttpContext context)
2019-08-08 10:17:49.375 +12:00 [INF] Response {"IsSuccess":false,"ErrorCode":null,"IsFound":true,"ErrorMessage":"Global Exception was Caught: System.InvalidOperationException: Nullable object must have a value.\r\n   at System.Nullable`1.get_Value()\r\n   at Pegasus_backend.Services.DashboardService.getLearnerWithRemainLessonsForToday(Int32 numOfRemainLesson) in c:\\source\\pegasusBackend\\Services\\DashboardService.cs:line 199\r\n   at Pegasus_backend.Controllers.DashboardController.Get(String orgIDsStr) in c:\\source\\pegasusBackend\\Controllers\\DashboardController.cs:line 45\r\n   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at System.Threading.Tasks.ValueTask`1.get_Result()\r\n   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()\r\n   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()\r\n   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)\r\n   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()\r\n   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()\r\n   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)\r\n   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()\r\n   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()\r\n   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.Invoke(HttpContext context)","Note":null,"Data":null}
2019-08-08 10:17:49.383 +12:00 [INF] Request finished in 1062290.9194ms 500 application/json
2019-08-08 10:18:10.228 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Dashboard/1  
2019-08-08 10:18:10.232 +12:00 [INF] 
2019-08-08 10:18:10.235 +12:00 [INF] Route matched with {action = "Get", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String) on controller Pegasus_backend.Controllers.DashboardController (Pegasus_backend).
2019-08-08 10:18:10.241 +12:00 [INF] Executing action method Pegasus_backend.Controllers.DashboardController.Get (Pegasus_backend) - Validation state: "Valid"
2019-08-08 10:18:31.262 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-08-08 10:18:31.447 +12:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lesson_id`, `l`.`begin_time`, `l`.`course_instance_id`, `l`.`created_at`, `l`.`end_time`, `l`.`group_course_instance_id`, `l`.`invoice_num`, `l`.`is_canceled`, `l`.`is_changed`, `l`.`is_confirm`, `l`.`is_paid`, `l`.`is_trial`, `l`.`learner_id`, `l`.`new_lesson_id`, `l`.`org_id`, `l`.`reason`, `l`.`room_id`, `l`.`teacher_id`, `l`.`trial_course_id`
FROM `ablemusic`.`lesson` AS `l`
WHERE (`l`.`is_canceled` <> 1) OR `l`.`is_canceled` IS NULL
2019-08-08 10:18:35.426 +12:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lesson_id`, `l`.`begin_time`, `l`.`course_instance_id`, `l`.`created_at`, `l`.`end_time`, `l`.`group_course_instance_id`, `l`.`invoice_num`, `l`.`is_canceled`, `l`.`is_changed`, `l`.`is_confirm`, `l`.`is_paid`, `l`.`is_trial`, `l`.`learner_id`, `l`.`new_lesson_id`, `l`.`org_id`, `l`.`reason`, `l`.`room_id`, `l`.`teacher_id`, `l`.`trial_course_id`
FROM `ablemusic`.`lesson` AS `l`
WHERE (`l`.`is_canceled` <> 1) OR `l`.`is_canceled` IS NULL
2019-08-08 10:18:36.018 +12:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`learner_id`, `l`.`address`, `l`.`comment`, `l`.`contact_num`, `l`.`created_at`, `l`.`dob`, `l`.`email`, `l`.`enroll_date`, `l`.`first_name`, `l`.`form_url`, `l`.`g5_certification`, `l`.`gender`, `l`.`is_abrsm_g5`, `l`.`is_active`, `l`.`is_under_18`, `l`.`last_name`, `l`.`learner_level`, `l`.`level_type`, `l`.`middle_name`, `l`.`note`, `l`.`org_id`, `l`.`otherfile_url`, `l`.`payment_period`, `l`.`photo`, `l`.`referrer`, `l`.`referrer_learner_id`, `l`.`user_id`
FROM `ablemusic`.`learner` AS `l`
WHERE `l`.`org_id` IN (1)
2019-08-08 10:18:36.248 +12:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `w`.`waiting_id`, `w`.`begin_date`, `w`.`comment`, `w`.`concert_fee`, `w`.`concert_fee_name`, `w`.`course_instance_id`, `w`.`course_name`, `w`.`created_at`, `w`.`due_date`, `w`.`end_date`, `w`.`group_course_instance_id`, `w`.`invoice_num`, `w`.`is_activate`, `w`.`is_confirmed`, `w`.`is_email_sent`, `w`.`is_paid`, `w`.`learner_id`, `w`.`learner_name`, `w`.`lesson_fee`, `w`.`lesson_note_fee_name`, `w`.`lesson_quantity`, `w`.`note_fee`, `w`.`other1_fee`, `w`.`other1_fee_name`, `w`.`other2_fee`, `w`.`other2_fee_name`, `w`.`other3_fee`, `w`.`other3_fee_name`, `w`.`owing_fee`, `w`.`paid_fee`, `w`.`term_id`, `w`.`total_fee`
FROM `ablemusic`.`invoice_waiting_confirm` AS `w`
INNER JOIN `ablemusic`.`learner` AS `l` ON `w`.`learner_id` = `l`.`learner_id`
WHERE `l`.`org_id` IN (1) AND (`w`.`is_confirmed` = 0)
2019-08-08 10:18:36.634 +12:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lesson_id`, `l`.`begin_time`, `l`.`course_instance_id`, `l`.`created_at`, `l`.`end_time`, `l`.`group_course_instance_id`, `l`.`invoice_num`, `l`.`is_canceled`, `l`.`is_changed`, `l`.`is_confirm`, `l`.`is_paid`, `l`.`is_trial`, `l`.`learner_id`, `l`.`new_lesson_id`, `l`.`org_id`, `l`.`reason`, `l`.`room_id`, `l`.`teacher_id`, `l`.`trial_course_id`
FROM `ablemusic`.`lesson` AS `l`
WHERE (`l`.`begin_time` IS NOT NULL AND (`l`.`is_canceled` = 1)) AND `l`.`org_id` IN (1)
2019-08-08 10:18:36.862 +12:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lesson_id`, `l`.`begin_time`, `l`.`course_instance_id`, `l`.`created_at`, `l`.`end_time`, `l`.`group_course_instance_id`, `l`.`invoice_num`, `l`.`is_canceled`, `l`.`is_changed`, `l`.`is_confirm`, `l`.`is_paid`, `l`.`is_trial`, `l`.`learner_id`, `l`.`new_lesson_id`, `l`.`org_id`, `l`.`reason`, `l`.`room_id`, `l`.`teacher_id`, `l`.`trial_course_id`
FROM `ablemusic`.`lesson` AS `l`
WHERE ((`l`.`begin_time` IS NOT NULL AND `l`.`org_id` IN (1)) AND ((`l`.`is_canceled` <> 1) OR `l`.`is_canceled` IS NULL)) AND (`l`.`is_changed` = 1)
2019-08-08 10:18:37.040 +12:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`amendment_id`, `a`.`amend_type`, `a`.`begin_date`, `a`.`begin_time`, `a`.`course_instance_id`, `a`.`course_schedule_id`, `a`.`created_at`, `a`.`day_of_week`, `a`.`end_date`, `a`.`end_time`, `a`.`is_temporary`, `a`.`learner_id`, `a`.`org_id`, `a`.`reason`, `a`.`room_id`, `a`.`teacher_id`
FROM `ablemusic`.`amendment` AS `a`
WHERE `a`.`org_id` IN (1)
2019-08-08 10:18:37.220 +12:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`amendment_id`, `a`.`amend_type`, `a`.`begin_date`, `a`.`begin_time`, `a`.`course_instance_id`, `a`.`course_schedule_id`, `a`.`created_at`, `a`.`day_of_week`, `a`.`end_date`, `a`.`end_time`, `a`.`is_temporary`, `a`.`learner_id`, `a`.`org_id`, `a`.`reason`, `a`.`room_id`, `a`.`teacher_id`
FROM `ablemusic`.`amendment` AS `a`
WHERE `a`.`org_id` IN (1)
2019-08-08 10:18:38.620 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lesson_id`, `l`.`begin_time`, `l`.`course_instance_id`, `l`.`created_at`, `l`.`end_time`, `l`.`group_course_instance_id`, `l`.`invoice_num`, `l`.`is_canceled`, `l`.`is_changed`, `l`.`is_confirm`, `l`.`is_paid`, `l`.`is_trial`, `l`.`learner_id`, `l`.`new_lesson_id`, `l`.`org_id`, `l`.`reason`, `l`.`room_id`, `l`.`teacher_id`, `l`.`trial_course_id`
FROM `ablemusic`.`lesson` AS `l`
WHERE (`l`.`is_canceled` <> 1) OR `l`.`is_canceled` IS NULL
>>>>>>> 3a463add4ffaf40fbb58ae3c0ee101107c503847
2019-08-08 11:32:23.127 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-08-08 11:32:23.532 +12:00 [INF] Setting up the time host service. Everyday run at 23pm
2019-08-08 11:32:25.085 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/rating/TeacherGetRating/1 application/json 72
2019-08-08 11:32:25.116 +12:00 [WRN] Failed to determine the https port for redirect.
2019-08-08 11:32:25.160 +12:00 [INF] {
	"UserId": 3,
	"LocaltionX": -36.9128580,
	"LocaltionY": 174.8736460
}
2019-08-08 11:32:25.294 +12:00 [INF] Route matched with {action = "TeacherGetRating", controller = "Rating"}. Executing action Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend)
2019-08-08 11:32:25.345 +12:00 [INF] Executing action method Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend) with arguments (["1"]) - Validation state: "Valid"
2019-08-08 11:32:26.273 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-08-08 11:32:27.270 +12:00 [INF] Executed DbCommand (65ms) [Parameters=[@__userId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`teacher_id`, `s`.`ability`, `s`.`comment`, `s`.`cv_url`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`form_url`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`invoice_template`, `s`.`ird_number`, `s`.`is_activate`, `s`.`is_contract`, `s`.`is_left`, `s`.`last_name`, `s`.`level`, `s`.`minimum_hours`, `s`.`mobile_phone`, `s`.`otherfile_url`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`teacher` AS `s`
WHERE `s`.`user_id` = @__userId_0
LIMIT 1
2019-08-08 11:32:27.295 +12:00 [INF] Executed action method Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 1936.8596ms.
2019-08-08 11:32:27.301 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-08-08 11:32:27.337 +12:00 [INF] Executed action Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend) in 2040.0045ms
2019-08-08 11:32:27.339 +12:00 [INF] Response {"IsSuccess":false,"ErrorCode":null,"IsFound":true,"ErrorMessage":"You are not teacher.","Note":null,"Data":null}
2019-08-08 11:32:27.344 +12:00 [INF] Request finished in 2260.2282ms 400 application/json; charset=utf-8
2019-08-08 11:32:31.677 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/rating/TeacherGetRating/272 application/json 72
2019-08-08 11:32:31.678 +12:00 [INF] {
	"UserId": 3,
	"LocaltionX": -36.9128580,
	"LocaltionY": 174.8736460
}
2019-08-08 11:32:31.679 +12:00 [INF] Route matched with {action = "TeacherGetRating", controller = "Rating"}. Executing action Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend)
2019-08-08 11:32:31.680 +12:00 [INF] Executing action method Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend) with arguments (["272"]) - Validation state: "Valid"
2019-08-08 11:32:31.681 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-08-08 11:32:31.893 +12:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`teacher_id`, `s`.`ability`, `s`.`comment`, `s`.`cv_url`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`form_url`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`invoice_template`, `s`.`ird_number`, `s`.`is_activate`, `s`.`is_contract`, `s`.`is_left`, `s`.`last_name`, `s`.`level`, `s`.`minimum_hours`, `s`.`mobile_phone`, `s`.`otherfile_url`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`teacher` AS `s`
WHERE `s`.`user_id` = @__userId_0
LIMIT 1
2019-08-08 11:32:31.894 +12:00 [INF] Executed action method Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 213.53900000000002ms.
2019-08-08 11:32:31.894 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-08-08 11:32:31.894 +12:00 [INF] Executed action Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend) in 215.6047ms
2019-08-08 11:32:31.895 +12:00 [INF] Response {"IsSuccess":false,"ErrorCode":null,"IsFound":true,"ErrorMessage":"You are not teacher.","Note":null,"Data":null}
2019-08-08 11:32:31.895 +12:00 [INF] Request finished in 218.1361ms 400 application/json; charset=utf-8
2019-08-08 11:32:36.192 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/rating/TeacherGetRating/10115 application/json 72
2019-08-08 11:32:36.192 +12:00 [INF] {
	"UserId": 3,
	"LocaltionX": -36.9128580,
	"LocaltionY": 174.8736460
}
2019-08-08 11:32:36.193 +12:00 [INF] Route matched with {action = "TeacherGetRating", controller = "Rating"}. Executing action Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend)
2019-08-08 11:32:36.193 +12:00 [INF] Executing action method Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend) with arguments (["10115"]) - Validation state: "Valid"
2019-08-08 11:32:36.194 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-08-08 11:32:36.398 +12:00 [INF] Executed DbCommand (88ms) [Parameters=[@__userId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`teacher_id`, `s`.`ability`, `s`.`comment`, `s`.`cv_url`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`form_url`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`invoice_template`, `s`.`ird_number`, `s`.`is_activate`, `s`.`is_contract`, `s`.`is_left`, `s`.`last_name`, `s`.`level`, `s`.`minimum_hours`, `s`.`mobile_phone`, `s`.`otherfile_url`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`teacher` AS `s`
WHERE `s`.`user_id` = @__userId_0
LIMIT 1
2019-08-08 11:32:36.484 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-08-08 11:32:36.485 +12:00 [WRN] The Include operation for navigation '[s].Lesson' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-08-08 11:32:36.714 +12:00 [INF] Executed DbCommand (78ms) [Parameters=[@__teacherId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s.Learner`.`first_name` AS `FirstName`, `s.Learner`.`last_name` AS `LastName`, `s.Lesson`.`begin_time` AS `BeginTime`, `s`.`comment`, `s`.`rate_star` AS `RateStar`
FROM `ablemusic`.`rating` AS `s`
LEFT JOIN `ablemusic`.`lesson` AS `s.Lesson` ON `s`.`lesson_id` = `s.Lesson`.`lesson_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
WHERE (`s`.`teacher_id` = @__teacherId_0) AND (`s`.`rate_type` = 0)
2019-08-08 11:32:36.720 +12:00 [INF] Executed action method Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 526.9292ms.
2019-08-08 11:32:36.721 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-08-08 11:32:36.727 +12:00 [INF] Executed action Pegasus_backend.Controllers.RatingController.TeacherGetRating (Pegasus_backend) in 534.525ms
2019-08-08 11:32:36.728 +12:00 [INF] Response {"IsSuccess":true,"ErrorCode":null,"IsFound":true,"ErrorMessage":null,"Note":null,"Data":[{"FirstName":"Oliver","LastName":"Deng","BeginTime":"2019-05-02T13:00:00","Comment":"baba","RateStar":5},{"FirstName":"Oliver","LastName":"Deng","BeginTime":"2019-05-02T13:00:00","Comment":"haha","RateStar":3}]}
2019-08-08 11:32:36.728 +12:00 [INF] Request finished in 535.8202ms 200 application/json; charset=utf-8
2019-08-08 14:53:13.067 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-08-08 14:53:13.457 +12:00 [INF] Setting up the time host service. Everyday run at 23pm
2019-08-08 14:53:19.727 +12:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/login application/json 57
2019-08-08 14:53:19.758 +12:00 [WRN] Failed to determine the https port for redirect.
2019-08-08 14:53:19.800 +12:00 [INF] {
	"userName": "qwerqwer123",
	"password": "helloworld"
}
2019-08-08 14:53:19.938 +12:00 [INF] Route matched with {action = "Login", controller = "Login"}. Executing action Pegasus_backend.Controllers.Authorization.LoginController.Login (Pegasus_backend)
2019-08-08 14:53:20.047 +12:00 [INF] Executing action method Pegasus_backend.Controllers.Authorization.LoginController.Login (Pegasus_backend) with arguments (["Pegasus_backend.Models.UsrAndPass"]) - Validation state: "Valid"
2019-08-08 14:53:20.973 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-08-08 14:53:22.005 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[@__model_UserName_0='?' (Size = -1)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`user_id`, `s`.`created_at`, `s`.`is_activate`, `s`.`is_online`, `s`.`password`, `s`.`role_id`, `s`.`signature`, `s`.`unread_message_id`, `s`.`user_name`, `s.Role`.`role_id`, `s.Role`.`role_name`
FROM `ablemusic`.`user` AS `s`
LEFT JOIN `ablemusic`.`role` AS `s.Role` ON `s`.`role_id` = `s.Role`.`role_id`
WHERE `s`.`user_name` = @__model_UserName_0
ORDER BY `s`.`user_id`
LIMIT 1
2019-08-08 14:53:22.175 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[@__model_UserName_0='?' (Size = -1)], CommandType='"Text"', CommandTimeout='30']
SELECT `s.Learner`.`learner_id`, `s.Learner`.`address`, `s.Learner`.`comment`, `s.Learner`.`contact_num`, `s.Learner`.`created_at`, `s.Learner`.`dob`, `s.Learner`.`email`, `s.Learner`.`enroll_date`, `s.Learner`.`first_name`, `s.Learner`.`form_url`, `s.Learner`.`g5_certification`, `s.Learner`.`gender`, `s.Learner`.`is_abrsm_g5`, `s.Learner`.`is_active`, `s.Learner`.`is_under_18`, `s.Learner`.`last_name`, `s.Learner`.`learner_level`, `s.Learner`.`level_type`, `s.Learner`.`middle_name`, `s.Learner`.`note`, `s.Learner`.`org_id`, `s.Learner`.`otherfile_url`, `s.Learner`.`payment_period`, `s.Learner`.`photo`, `s.Learner`.`referrer`, `s.Learner`.`referrer_learner_id`, `s.Learner`.`user_id`
FROM `ablemusic`.`learner` AS `s.Learner`
INNER JOIN (
    SELECT DISTINCT `t`.*
    FROM (
        SELECT `s0`.`user_id`
        FROM `ablemusic`.`user` AS `s0`
        LEFT JOIN `ablemusic`.`role` AS `s.Role0` ON `s0`.`role_id` = `s.Role0`.`role_id`
        WHERE `s0`.`user_name` = @__model_UserName_0
        ORDER BY `s0`.`user_id`
        LIMIT 1
    ) AS `t`
) AS `t0` ON `s.Learner`.`user_id` = `t0`.`user_id`
ORDER BY `t0`.`user_id`
2019-08-08 14:53:22.349 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[@__model_UserName_0='?' (Size = -1)], CommandType='"Text"', CommandTimeout='30']
SELECT `s.Teacher`.`teacher_id`, `s.Teacher`.`ability`, `s.Teacher`.`comment`, `s.Teacher`.`cv_url`, `s.Teacher`.`dob`, `s.Teacher`.`email`, `s.Teacher`.`expiry_date`, `s.Teacher`.`first_name`, `s.Teacher`.`form_url`, `s.Teacher`.`gender`, `s.Teacher`.`home_phone`, `s.Teacher`.`id_number`, `s.Teacher`.`id_photo`, `s.Teacher`.`id_type`, `s.Teacher`.`invoice_template`, `s.Teacher`.`ird_number`, `s.Teacher`.`is_activate`, `s.Teacher`.`is_contract`, `s.Teacher`.`is_left`, `s.Teacher`.`last_name`, `s.Teacher`.`level`, `s.Teacher`.`minimum_hours`, `s.Teacher`.`mobile_phone`, `s.Teacher`.`otherfile_url`, `s.Teacher`.`photo`, `s.Teacher`.`user_id`, `s.Teacher`.`visa`
FROM `ablemusic`.`teacher` AS `s.Teacher`
INNER JOIN (
    SELECT DISTINCT `t1`.*
    FROM (
        SELECT `s1`.`user_id`
        FROM `ablemusic`.`user` AS `s1`
        LEFT JOIN `ablemusic`.`role` AS `s.Role1` ON `s1`.`role_id` = `s.Role1`.`role_id`
        WHERE `s1`.`user_name` = @__model_UserName_0
        ORDER BY `s1`.`user_id`
        LIMIT 1
    ) AS `t1`
) AS `t2` ON `s.Teacher`.`user_id` = `t2`.`user_id`
ORDER BY `t2`.`user_id`
2019-08-08 14:53:22.553 +12:00 [INF] Executed DbCommand (59ms) [Parameters=[@__model_UserName_0='?' (Size = -1)], CommandType='"Text"', CommandTimeout='30']
SELECT `s.Staff`.`staff_id`, `s.Staff`.`dob`, `s.Staff`.`email`, `s.Staff`.`expiry_date`, `s.Staff`.`first_name`, `s.Staff`.`gender`, `s.Staff`.`home_phone`, `s.Staff`.`id_number`, `s.Staff`.`id_photo`, `s.Staff`.`id_type`, `s.Staff`.`ird_number`, `s.Staff`.`is_activate`, `s.Staff`.`last_name`, `s.Staff`.`mobile_phone`, `s.Staff`.`photo`, `s.Staff`.`user_id`, `s.Staff`.`visa`
FROM `ablemusic`.`staff` AS `s.Staff`
INNER JOIN (
    SELECT DISTINCT `t3`.*
    FROM (
        SELECT `s2`.`user_id`
        FROM `ablemusic`.`user` AS `s2`
        LEFT JOIN `ablemusic`.`role` AS `s.Role2` ON `s2`.`role_id` = `s.Role2`.`role_id`
        WHERE `s2`.`user_name` = @__model_UserName_0
        ORDER BY `s2`.`user_id`
        LIMIT 1
    ) AS `t3`
) AS `t4` ON `s.Staff`.`user_id` = `t4`.`user_id`
ORDER BY `t4`.`user_id`, `s.Staff`.`staff_id`
2019-08-08 14:53:22.575 +12:00 [INF] Executed action method Pegasus_backend.Controllers.Authorization.LoginController.Login (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2513.2531ms.
2019-08-08 14:53:22.584 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-08-08 14:53:22.603 +12:00 [INF] Executed action Pegasus_backend.Controllers.Authorization.LoginController.Login (Pegasus_backend) in 2662.1289ms
2019-08-08 14:53:22.605 +12:00 [INF] Response {"IsSuccess":true,"ErrorCode":null,"IsFound":true,"ErrorMessage":null,"Note":null,"Data":{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOiIxMDExNSIsIm5iZiI6MTU2NTIzMjgwMiwiZXhwIjoxNTY2NDQyNDAyLCJpYXQiOjE1NjUyMzI4MDJ9.JMrBuUmFqqpFRinlNEWNig1sVpFfNpS6CuHszgtZ4dk","username":"qwerqwer123","roleid":1,"userid":10115,"expires":1566442402,"userdetails":{"firstname":"BABA123","lastname":"asd","position":"teacher"},"photo":null,"mobileComponents":[{"name":"Check In","code":"#1abc9c","component":"CheckIn"},{"name":"Check Out","code":"#2ecc71","component":"CheckOut"},{"name":"Schedule","code":"#3498db","component":"Schedule"},{"name":"Feedback","code":"#9b59b6","component":"Feedback"},{"name":"View Feedback","code":"#27ae60","component":"FeedbackView"}]}
2019-08-08 14:53:22.611 +12:00 [INF] Request finished in 2885.6632ms 200 application/json; charset=utf-8
