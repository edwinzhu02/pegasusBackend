2019-06-26 10:04:25.149 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/paymentbydate/1/2019-01-01/2019-07-01  
2019-06-26 10:04:25.161 +12:00 [INF] Request finished in 11.9314ms 404 
2019-06-26 10:04:53.556 +12:00 [INF] User profile is available. Using 'C:\Users\Learnspace\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-06-26 10:04:54.598 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2019-06-26 10:04:54.633 +12:00 [WRN] Failed to determine the https port for redirect.
2019-06-26 10:04:54.840 +12:00 [INF] Request finished in 243.2966ms 404 
2019-06-26 10:04:59.849 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/paymentbydate/1/2019-01-01/2019-07-01  
2019-06-26 10:04:59.850 +12:00 [INF] Request finished in 5.5823ms 404 
2019-06-26 10:05:03.331 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/paymentbydate/1/2019-01-01/2019-07-01  
2019-06-26 10:05:03.332 +12:00 [INF] Request finished in 0.4917ms 404 
2019-06-26 10:05:24.201 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html  
2019-06-26 10:05:24.306 +12:00 [INF] Request finished in 105.1011ms 200 text/html
2019-06-26 10:05:24.333 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/swagger-ui-standalone-preset.js  
2019-06-26 10:05:24.333 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/swagger-ui-bundle.js  
2019-06-26 10:05:24.399 +12:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2019-06-26 10:05:24.403 +12:00 [INF] Request finished in 69.5796ms 200 application/javascript
2019-06-26 10:05:24.412 +12:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2019-06-26 10:05:24.412 +12:00 [INF] Request finished in 79.3323ms 200 application/javascript
2019-06-26 10:05:24.687 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json  
2019-06-26 10:05:25.002 +12:00 [INF] Request finished in 315.3954ms 200 application/json;charset=utf-8
2019-06-26 10:06:29.647 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/paymentbydate/1/2019-01-01/2019-07-01  
2019-06-26 10:06:29.655 +12:00 [INF] Request finished in 31.246ms 404 
2019-06-26 10:06:58.749 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Payment/paymentbydate/3/2019-01-01/2019-07-01  
2019-06-26 10:06:58.749 +12:00 [INF] Request finished in 0.3835ms 404 
2019-06-26 12:06:49.154 +12:00 [INF] User profile is available. Using '/Users/oliver/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2019-06-26 12:07:42.068 +12:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/payment/payInvoice application/json 65
2019-06-26 12:07:42.095 +12:00 [WRN] Failed to determine the https port for redirect.
2019-06-26 12:07:42.222 +12:00 [INF] Route matched with {action = "SavePaymentDetails", controller = "Payment"}. Executing action Pegasus_backend.Controllers.PaymentController.SavePaymentDetails (Pegasus_backend)
2019-06-26 12:07:42.694 +12:00 [INF] Executing action method Pegasus_backend.Controllers.PaymentController.SavePaymentDetails (Pegasus_backend) with arguments (["Pegasus_backend.Models.InvoicePay"]) - Validation state: "Valid"
2019-06-26 12:07:43.444 +12:00 [INF] Entity Framework Core 2.1.8-servicing-32085 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-06-26 12:07:45.157 +12:00 [INF] Executed DbCommand (71ms) [Parameters=[@__details_InvoiceId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`invoice_id`, `s`.`begin_date`, `s`.`concert_fee`, `s`.`concert_fee_name`, `s`.`course_instance_id`, `s`.`course_name`, `s`.`created_at`, `s`.`due_date`, `s`.`end_date`, `s`.`group_course_instance_id`, `s`.`invoice_num`, `s`.`is_active`, `s`.`is_paid`, `s`.`learner_id`, `s`.`learner_name`, `s`.`lesson_fee`, `s`.`lesson_note_fee_name`, `s`.`lesson_quantity`, `s`.`note_fee`, `s`.`other1_fee`, `s`.`other1_fee_name`, `s`.`other2_fee`, `s`.`other2_fee_name`, `s`.`other3_fee`, `s`.`other3_fee_name`, `s`.`owing_fee`, `s`.`paid_fee`, `s`.`term_id`, `s`.`total_fee`
FROM `ablemusic`.`invoice` AS `s`
WHERE `s`.`invoice_id` = @__details_InvoiceId_0
LIMIT 1
2019-06-26 12:07:45.422 +12:00 [INF] Executed DbCommand (86ms) [Parameters=[@p28='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = Decimal), @p2='?' (Size = -1), @p3='?' (DbType = Int32), @p4='?' (Size = -1), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (DbType = DateTime), @p8='?' (DbType = AnsiString), @p9='?' (Size = -1), @p10='?' (DbType = Int16), @p11='?' (DbType = Int16), @p12='?' (DbType = Int32), @p13='?' (Size = -1), @p14='?' (DbType = Decimal), @p15='?' (Size = -1), @p16='?' (DbType = Int32), @p17='?' (DbType = Decimal), @p18='?' (DbType = AnsiString), @p19='?' (Size = -1), @p20='?' (DbType = AnsiString), @p21='?' (Size = -1), @p22='?' (DbType = AnsiString), @p23='?' (Size = -1), @p24='?' (DbType = Decimal), @p25='?' (DbType = Decimal), @p26='?' (DbType = Int16), @p27='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ablemusic`.`invoice` SET `begin_date` = @p0, `concert_fee` = @p1, `concert_fee_name` = @p2, `course_instance_id` = @p3, `course_name` = @p4, `created_at` = @p5, `due_date` = @p6, `end_date` = @p7, `group_course_instance_id` = @p8, `invoice_num` = @p9, `is_active` = @p10, `is_paid` = @p11, `learner_id` = @p12, `learner_name` = @p13, `lesson_fee` = @p14, `lesson_note_fee_name` = @p15, `lesson_quantity` = @p16, `note_fee` = @p17, `other1_fee` = @p18, `other1_fee_name` = @p19, `other2_fee` = @p20, `other2_fee_name` = @p21, `other3_fee` = @p22, `other3_fee_name` = @p23, `owing_fee` = @p24, `paid_fee` = @p25, `term_id` = @p26, `total_fee` = @p27
WHERE `invoice_id` = @p28;
SELECT ROW_COUNT();
2019-06-26 12:07:45.559 +12:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = AnsiString), @p1='?' (DbType = Decimal), @p2='?' (DbType = AnsiString), @p3='?' (Size = -1), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = AnsiString), @p7='?' (DbType = Int32), @p8='?' (DbType = Byte), @p9='?' (DbType = Byte), @p10='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ablemusic`.`payment` (`after_balance`, `amount`, `before_balance`, `comment`, `created_at`, `invoice_id`, `is_confirmed`, `learner_id`, `payment_method`, `payment_type`, `staff_id`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `payment_id`
FROM `ablemusic`.`payment`
WHERE ROW_COUNT() = 1
 AND `payment_id`=LAST_INSERT_ID();
2019-06-26 12:07:45.638 +12:00 [INF] Executed DbCommand (53ms) [Parameters=[@__details_LearnerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`learner_id`, `s`.`balance`, `s`.`updated_at`
FROM `ablemusic`.`fund` AS `s`
WHERE `s`.`learner_id` = @__details_LearnerId_0
LIMIT 1
2019-06-26 12:07:45.707 +12:00 [INF] Executed DbCommand (53ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ablemusic`.`fund` SET `balance` = @p0, `updated_at` = @p1
WHERE `learner_id` = @p2;
SELECT ROW_COUNT();
2019-06-26 12:07:45.786 +12:00 [INF] Executed action method Pegasus_backend.Controllers.PaymentController.SavePaymentDetails (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3078.7206ms.
2019-06-26 12:07:45.795 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-06-26 12:07:45.809 +12:00 [INF] Executed action Pegasus_backend.Controllers.PaymentController.SavePaymentDetails (Pegasus_backend) in 3584.1604ms
2019-06-26 12:07:45.813 +12:00 [INF] Request finished in 3745.5744ms 200 application/json; charset=utf-8
