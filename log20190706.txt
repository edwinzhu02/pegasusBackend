2019-07-06 15:01:46.175 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html  
2019-07-06 15:01:46.189 +12:00 [INF] Request finished in 18.2155ms 200 text/html
2019-07-06 15:01:46.206 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/swagger-ui.css  
2019-07-06 15:01:46.212 +12:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2019-07-06 15:01:46.213 +12:00 [INF] Request finished in 8.1336ms 200 text/css
2019-07-06 15:01:46.533 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json  
2019-07-06 15:01:46.540 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/favicon-32x32.png  
2019-07-06 15:01:46.541 +12:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2019-07-06 15:01:46.541 +12:00 [INF] Request finished in 0.9095ms 200 image/png
2019-07-06 15:01:46.577 +12:00 [INF] Request finished in 43.2848ms 200 application/json;charset=utf-8
2019-07-06 18:19:17.168 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/lookups  
2019-07-06 18:19:17.168 +12:00 [INF] Policy execution successful.
2019-07-06 18:19:17.169 +12:00 [INF] Request finished in 0.679ms 204 
2019-07-06 18:19:17.178 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/navitems  
2019-07-06 18:19:17.190 +12:00 [INF] Policy execution successful.
2019-07-06 18:19:17.191 +12:00 [INF] Request finished in 12.7469ms 204 
2019-07-06 18:19:17.230 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/room/forCalendar  
2019-07-06 18:19:17.230 +12:00 [INF] Policy execution successful.
2019-07-06 18:19:17.231 +12:00 [INF] Request finished in 0.7966ms 204 
2019-07-06 18:19:17.246 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/images/staff/Photos/2190613092457108.jpg  
2019-07-06 18:19:17.247 +12:00 [INF] Request finished in 1.3397ms 404 
2019-07-06 18:19:18.070 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lookups  
2019-07-06 18:19:18.071 +12:00 [INF] Policy execution successful.
2019-07-06 18:19:18.072 +12:00 [INF] Successfully validated the token.
2019-07-06 18:19:18.072 +12:00 [INF] Route matched with {action = "GetLookups", controller = "Lookups"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLookups() on controller Pegasus_backend.Controllers.LookupsController (Pegasus_backend).
2019-07-06 18:19:18.073 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/navitems  
2019-07-06 18:19:18.073 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LookupsController.GetLookups (Pegasus_backend) - Validation state: "Valid"
2019-07-06 18:19:18.074 +12:00 [INF] Policy execution successful.
2019-07-06 18:19:18.074 +12:00 [INF] Successfully validated the token.
2019-07-06 18:19:18.074 +12:00 [INF] Route matched with {action = "GetNavItems", controller = "NavItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetNavItems() on controller Pegasus_backend.Controllers.NavItemsController (Pegasus_backend).
2019-07-06 18:19:18.075 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-06 18:19:18.075 +12:00 [INF] Authorization was successful.
2019-07-06 18:19:18.076 +12:00 [INF] Executing action method Pegasus_backend.Controllers.NavItemsController.GetNavItems (Pegasus_backend) - Validation state: "Valid"
2019-07-06 18:19:18.083 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/room/forCalendar  
2019-07-06 18:19:18.090 +12:00 [INF] Policy execution successful.
2019-07-06 18:19:18.090 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-06 18:19:18.091 +12:00 [INF] Successfully validated the token.
2019-07-06 18:19:18.091 +12:00 [INF] Route matched with {action = "GetRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoom() on controller Pegasus_backend.Controllers.RoomController (Pegasus_backend).
2019-07-06 18:19:18.091 +12:00 [INF] Authorization was successful.
2019-07-06 18:19:18.091 +12:00 [INF] Executing action method Pegasus_backend.Controllers.RoomController.GetRoom (Pegasus_backend) - Validation state: "Valid"
2019-07-06 18:19:18.119 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-06 18:19:18.555 +12:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `l`.`lookup_id`, `l`.`description`, `l`.`lookup_type`, `l`.`prop_name`, `l`.`prop_value`
FROM `ablemusic`.`lookup` AS `l`
2019-07-06 18:19:18.558 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LookupsController.GetLookups (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 483.98350000000005ms.
2019-07-06 18:19:18.558 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Collections.Generic.List`1[[Pegasus_backend.pegasusContext.Lookup, Pegasus_backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-06 18:19:18.558 +12:00 [INF] Executed action Pegasus_backend.Controllers.LookupsController.GetLookups (Pegasus_backend) in 486.5194ms
2019-07-06 18:19:18.559 +12:00 [INF] Request finished in 488.3172ms 200 application/json; charset=utf-8
2019-07-06 18:19:18.586 +12:00 [INF] Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`user_id`, `s`.`created_at`, `s`.`is_activate`, `s`.`is_online`, `s`.`password`, `s`.`role_id`, `s`.`signature`, `s`.`unread_message_id`, `s`.`user_name`
FROM `ablemusic`.`user` AS `s`
WHERE `s`.`user_id` = @__userId_0
LIMIT 1
2019-07-06 18:19:18.586 +12:00 [INF] Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__userId_0
LIMIT 1
2019-07-06 18:19:18.681 +12:00 [INF] Executed DbCommand (33ms) [Parameters=[@__roleId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`page_id`
FROM `ablemusic`.`role_access` AS `s`
WHERE `s`.`role_id` = @__roleId_0
2019-07-06 18:19:18.681 +12:00 [INF] Executed DbCommand (33ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-06 18:19:18.777 +12:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`page_group_id`, `s`.`display_order`, `s`.`icon`, `s`.`page_group_name`
FROM `ablemusic`.`page_group` AS `s`
ORDER BY `s`.`page_group_id`
2019-07-06 18:19:18.777 +12:00 [INF] Executed DbCommand (32ms) [Parameters=[@__orgId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`room_id` AS `id`, `s`.`room_name` AS `title`
FROM `ablemusic`.`room` AS `s`
WHERE `s`.`org_id` = @__orgId_0
2019-07-06 18:19:18.778 +12:00 [INF] Executed action method Pegasus_backend.Controllers.RoomController.GetRoom (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 686.3884ms.
2019-07-06 18:19:18.778 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Collections.Generic.IEnumerable`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-06 18:19:18.778 +12:00 [INF] Executed action Pegasus_backend.Controllers.RoomController.GetRoom (Pegasus_backend) in 687.5195ms
2019-07-06 18:19:18.779 +12:00 [INF] Request finished in 696.1783ms 200 application/json; charset=utf-8
2019-07-06 18:19:18.810 +12:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.Page`.`page_id`, `s.Page`.`display_order`, `s.Page`.`icon`, `s.Page`.`is_activate`, `s.Page`.`page_group_id`, `s.Page`.`page_name`, `s.Page`.`para`, `s.Page`.`para_flag`, `s.Page`.`url`
FROM `ablemusic`.`page` AS `s.Page`
INNER JOIN (
    SELECT `s0`.`page_group_id`
    FROM `ablemusic`.`page_group` AS `s0`
) AS `t` ON `s.Page`.`page_group_id` = `t`.`page_group_id`
ORDER BY `t`.`page_group_id`
2019-07-06 18:19:18.812 +12:00 [INF] Executed action method Pegasus_backend.Controllers.NavItemsController.GetNavItems (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 735.43090000000007ms.
2019-07-06 18:19:18.812 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-06 18:19:18.813 +12:00 [INF] Executed action Pegasus_backend.Controllers.NavItemsController.GetNavItems (Pegasus_backend) in 738.57580000000007ms
2019-07-06 18:19:18.813 +12:00 [INF] Request finished in 739.8454ms 200 application/json; charset=utf-8
2019-07-06 18:19:18.820 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-06  
2019-07-06 18:19:18.820 +12:00 [INF] Policy execution successful.
2019-07-06 18:19:18.820 +12:00 [INF] Request finished in 0.5229ms 204 
2019-07-06 18:19:19.034 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForReceptionist/3/2019-07-06  
2019-07-06 18:19:19.034 +12:00 [INF] Policy execution successful.
2019-07-06 18:19:19.034 +12:00 [INF] Successfully validated the token.
2019-07-06 18:19:19.035 +12:00 [INF] Route matched with {action = "GetLessonsForReceptionist", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsForReceptionist(Int32, System.DateTime) on controller Pegasus_backend.Controllers.LessonController (Pegasus_backend).
2019-07-06 18:19:19.035 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) - Validation state: "Valid"
2019-07-06 18:19:19.036 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-07-06 18:19:19.133 +12:00 [INF] Executed DbCommand (33ms) [Parameters=[@__8__locals1_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_id`, `s`.`dob`, `s`.`email`, `s`.`expiry_date`, `s`.`first_name`, `s`.`gender`, `s`.`home_phone`, `s`.`id_number`, `s`.`id_photo`, `s`.`id_type`, `s`.`ird_number`, `s`.`is_activate`, `s`.`last_name`, `s`.`mobile_phone`, `s`.`photo`, `s`.`user_id`, `s`.`visa`
FROM `ablemusic`.`staff` AS `s`
WHERE `s`.`user_id` = @__8__locals1_userId_0
LIMIT 1
2019-07-06 18:19:19.229 +12:00 [INF] Executed DbCommand (32ms) [Parameters=[@__staff_StaffId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`staff_org_id`, `s`.`is_activate`, `s`.`org_id`, `s`.`staff_id`
FROM `ablemusic`.`staff_org` AS `s`
WHERE `s`.`staff_id` = @__staff_StaffId_0
LIMIT 1
2019-07-06 18:19:19.261 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-06 18:19:19.261 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-06 18:19:19.261 +12:00 [WRN] The Include operation for navigation '[s].Teacher' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-06 18:19:19.261 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-06 18:19:19.261 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-06 18:19:19.261 +12:00 [WRN] The Include operation for navigation '[s].TrialCourse' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-06 18:19:19.261 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.LearnerGroupCourse.Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-07-06 18:19:19.316 +12:00 [WRN] The LINQ expression 'where ((((Convert(Convert([s].OrgId, Int32), Nullable`1) == Convert(__orgId_0, Nullable`1)) AndAlso (Convert([s].BeginTime, DateTime).Year == __8__locals1_date_Year_1)) AndAlso (Convert([s].BeginTime, DateTime).Month == __8__locals1_date_Month_2)) AndAlso (Convert([s].BeginTime, DateTime).Day == __8__locals1_date_Day_3))' could not be translated and will be evaluated locally.
2019-07-06 18:19:19.577 +12:00 [INF] Executed DbCommand (148ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`org_id` AS `OrgId`, `s`.`begin_time` AS `start`, `s`.`lesson_id` AS `id`, `s`.`room_id` AS `resourceId`, `s`.`end_time` AS `end`, `s.Teacher`.`first_name` AS `TeacherName`, `s`.`course_instance_id`, CASE
    WHEN ((
        SELECT `q1`.`balance`
        FROM `ablemusic`.`fund` AS `q1`
        WHERE `q1`.`learner_id` = `s`.`learner_id`
        LIMIT 1
    ) - (
        SELECT `q2`.`price`
        FROM `ablemusic`.`course` AS `q2`
        WHERE `q2`.`course_id` = `s.CourseInstance`.`course_id`
        LIMIT 1
    )) <= 0
    THEN 1 ELSE 0
END, `s.Learner`.`first_name`, `s.Room`.`room_name` AS `RoomName`, `s.Org`.`org_name` AS `OrgName`, `s`.`teacher_id` AS `TeacherId`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.GroupCourseInstance.Course`.`course_id`, `s`.`trial_course_id`, `s.CourseInstance.Course`.`course_id`, `s`.`learner_id` AS `LearnerId`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`teacher` AS `s.Teacher` ON `s`.`teacher_id` = `s.Teacher`.`teacher_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
WHERE ((`s`.`is_canceled` <> 1) OR `s`.`is_canceled` IS NULL) AND ((`s`.`is_confirm` <> 1) OR `s`.`is_confirm` IS NULL)
2019-07-06 18:19:19.678 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 642.0974ms.
2019-07-06 18:19:19.678 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-07-06 18:19:19.678 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForReceptionist (Pegasus_backend) in 643.48890000000006ms
2019-07-06 18:19:19.678 +12:00 [INF] Request finished in 644.6568ms 200 application/json; charset=utf-8
