<<<<<<< HEAD
2019-09-24 12:18:38.709 +12:00 [INF] User profile is available. Using 'C:\Users\Zhuyi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-09-24 12:18:39.180 +12:00 [INF] Setting up the time host service. Everyday run at 23pm
2019-09-24 12:18:39.957 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2019-09-24 12:18:40.020 +12:00 [WRN] Failed to determine the https port for redirect.
2019-09-24 12:18:40.160 +12:00 [INF] 
2019-09-24 12:18:40.584 +12:00 [INF] Response 
2019-09-24 12:18:40.594 +12:00 [INF] Request finished in 639.2668ms 404 
2019-09-24 12:18:57.764 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForTeacher/219/2019-09-22  
2019-09-24 12:18:57.765 +12:00 [INF] 
2019-09-24 12:18:57.845 +12:00 [INF] Route matched with {action = "GetLessonsForTeacher", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsForTeacher(Int16, System.DateTime) on controller Pegasus_backend.Controllers.LessonController (Pegasus_backend).
2019-09-24 12:18:58.084 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend) - Validation state: "Valid"
2019-09-24 12:18:59.080 +12:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 12:18:59.161 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:18:59.161 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:18:59.161 +12:00 [WRN] The Include operation for navigation '[s].Teacher.AvailableDays' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:18:59.161 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:18:59.161 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance.Course' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:18:59.161 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.Course' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:18:59.161 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:18:59.270 +12:00 [WRN] The LINQ expression 'where ((__8__locals1_beginDate_Date_1 <= Convert([s].EndTime, DateTime).Date) AndAlso (Convert([s].EndTime, DateTime).Date <= __endDate_Date_2))' could not be translated and will be evaluated locally.
2019-09-24 12:19:00.311 +12:00 [INF] Executed DbCommand (104ms) [Parameters=[@__8__locals1_teacherId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`end_time` AS `end`, `s`.`begin_time` AS `BeginTime0`, `s.Learner`.`first_name`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.Org`.`org_name` AS `orgName0`, `s.Room`.`room_name` AS `roomName0`, `s.Org`.`abbr` AS `orgAbbr`, `s`.`org_id` AS `OrgId`, `s`.`room_id` AS `RoomId`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, `s`.`is_canceled` AS `IsCanceled`, `s`.`reason`, `s`.`lesson_id` AS `LessonId`, `s`.`learner_id` AS `LearnerId`, (
    SELECT `z`.`room_name`
    FROM `ablemusic`.`room` AS `z`
    WHERE `z`.`room_id` = (
        SELECT `r`.`room_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z0`.`org_name`
    FROM `ablemusic`.`org` AS `z0`
    WHERE `z0`.`org_id` = (
        SELECT `r0`.`org_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r1`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r1`
    WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
WHERE `s`.`teacher_id` = @__8__locals1_teacherId_0
2019-09-24 12:19:00.333 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2241.1656000000003ms.
2019-09-24 12:19:00.340 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-09-24 12:19:00.427 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend) in 2578.5822000000003ms
2019-09-24 12:19:00.427 +12:00 [INF] Response {"IsSuccess":true,"ErrorCode":null,"IsFound":true,"ErrorMessage":null,"Note":null,"Data":[]}
2019-09-24 12:19:00.430 +12:00 [INF] Request finished in 2666.0892ms 200 application/json; charset=utf-8
2019-09-24 12:19:33.928 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForTeacher/219/2019-09-22  
2019-09-24 12:19:33.928 +12:00 [INF] 
2019-09-24 12:19:33.928 +12:00 [INF] Route matched with {action = "GetLessonsForTeacher", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsForTeacher(Int16, System.DateTime) on controller Pegasus_backend.Controllers.LessonController (Pegasus_backend).
2019-09-24 12:19:33.935 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend) - Validation state: "Valid"
2019-09-24 12:19:50.742 +12:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 12:19:56.562 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:19:56.562 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:19:56.562 +12:00 [WRN] The Include operation for navigation '[s].Teacher.AvailableDays' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:19:56.562 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:19:56.563 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance.Course' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:19:56.563 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.Course' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:19:56.563 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:19:56.588 +12:00 [WRN] The LINQ expression 'where ((__8__locals1_beginDate_Date_1 <= Convert([s].EndTime, DateTime).Date) AndAlso (Convert([s].EndTime, DateTime).Date <= __endDate_Date_2))' could not be translated and will be evaluated locally.
2019-09-24 12:19:56.792 +12:00 [INF] Executed DbCommand (85ms) [Parameters=[@__8__locals1_teacherId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`end_time` AS `end`, `s`.`begin_time` AS `BeginTime0`, `s.Learner`.`first_name`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.Org`.`org_name` AS `orgName0`, `s.Room`.`room_name` AS `roomName0`, `s.Org`.`abbr` AS `orgAbbr`, `s`.`org_id` AS `OrgId`, `s`.`room_id` AS `RoomId`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, `s`.`is_canceled` AS `IsCanceled`, `s`.`reason`, `s`.`lesson_id` AS `LessonId`, `s`.`learner_id` AS `LearnerId`, (
    SELECT `z`.`room_name`
    FROM `ablemusic`.`room` AS `z`
    WHERE `z`.`room_id` = (
        SELECT `r`.`room_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z0`.`org_name`
    FROM `ablemusic`.`org` AS `z0`
    WHERE `z0`.`org_id` = (
        SELECT `r0`.`org_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r1`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r1`
    WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
WHERE `s`.`teacher_id` = @__8__locals1_teacherId_0
2019-09-24 12:19:56.794 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22858.5288ms.
2019-09-24 12:19:56.794 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-09-24 12:19:56.794 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend) in 22866.0199ms
2019-09-24 12:19:56.795 +12:00 [INF] Response {"IsSuccess":true,"ErrorCode":null,"IsFound":true,"ErrorMessage":null,"Note":null,"Data":[]}
2019-09-24 12:19:56.795 +12:00 [INF] Request finished in 22867.1579ms 200 application/json; charset=utf-8
2019-09-24 12:21:07.694 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForTeacher/257/2019-09-22  
2019-09-24 12:21:07.697 +12:00 [INF] 
2019-09-24 12:21:07.698 +12:00 [INF] Route matched with {action = "GetLessonsForTeacher", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsForTeacher(Int16, System.DateTime) on controller Pegasus_backend.Controllers.LessonController (Pegasus_backend).
2019-09-24 12:21:07.698 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend) - Validation state: "Valid"
2019-09-24 12:21:13.887 +12:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 12:21:13.896 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:13.896 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:13.896 +12:00 [WRN] The Include operation for navigation '[s].Teacher.AvailableDays' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:13.896 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:13.896 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance.Course' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:13.896 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.Course' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:13.896 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:13.919 +12:00 [WRN] The LINQ expression 'where ((__8__locals1_beginDate_Date_1 <= Convert([s].EndTime, DateTime).Date) AndAlso (Convert([s].EndTime, DateTime).Date <= __endDate_Date_2))' could not be translated and will be evaluated locally.
2019-09-24 12:21:14.138 +12:00 [INF] Executed DbCommand (101ms) [Parameters=[@__8__locals1_teacherId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`end_time` AS `end`, `s`.`begin_time` AS `BeginTime0`, `s.Learner`.`first_name`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.Org`.`org_name` AS `orgName0`, `s.Room`.`room_name` AS `roomName0`, `s.Org`.`abbr` AS `orgAbbr`, `s`.`org_id` AS `OrgId`, `s`.`room_id` AS `RoomId`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, `s`.`is_canceled` AS `IsCanceled`, `s`.`reason`, `s`.`lesson_id` AS `LessonId`, `s`.`learner_id` AS `LearnerId`, (
    SELECT `z`.`room_name`
    FROM `ablemusic`.`room` AS `z`
    WHERE `z`.`room_id` = (
        SELECT `r`.`room_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z0`.`org_name`
    FROM `ablemusic`.`org` AS `z0`
    WHERE `z0`.`org_id` = (
        SELECT `r0`.`org_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r1`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r1`
    WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
WHERE `s`.`teacher_id` = @__8__locals1_teacherId_0
2019-09-24 12:21:14.209 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6510.9548ms.
2019-09-24 12:21:14.209 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-09-24 12:21:14.209 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend) in 6511.5921000000008ms
2019-09-24 12:21:14.209 +12:00 [INF] Response {"IsSuccess":true,"ErrorCode":null,"IsFound":true,"ErrorMessage":null,"Note":null,"Data":[]}
2019-09-24 12:21:14.209 +12:00 [INF] Request finished in 6515.1257ms 200 application/json; charset=utf-8
2019-09-24 12:21:40.464 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/lesson/GetLessonsForTeacher/257/2019-09-20  
2019-09-24 12:21:40.464 +12:00 [INF] 
2019-09-24 12:21:40.465 +12:00 [INF] Route matched with {action = "GetLessonsForTeacher", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLessonsForTeacher(Int16, System.DateTime) on controller Pegasus_backend.Controllers.LessonController (Pegasus_backend).
2019-09-24 12:21:40.484 +12:00 [INF] Executing action method Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend) - Validation state: "Valid"
2019-09-24 12:21:46.624 +12:00 [INF] Entity Framework Core 2.2.6-servicing-10079 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 12:21:46.633 +12:00 [WRN] The Include operation for navigation '[s].Room' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:46.633 +12:00 [WRN] The Include operation for navigation '[s].Learner' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:46.633 +12:00 [WRN] The Include operation for navigation '[s].Teacher.AvailableDays' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:46.633 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:46.633 +12:00 [WRN] The Include operation for navigation '[s].CourseInstance.Course' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:46.633 +12:00 [WRN] The Include operation for navigation '[s].GroupCourseInstance.Course' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:46.633 +12:00 [WRN] The Include operation for navigation '[s].Org' is unnecessary and was ignored because the navigation is not reachable in the final query results. See https://go.microsoft.com/fwlink/?linkid=850303 for more information.
2019-09-24 12:21:46.652 +12:00 [WRN] The LINQ expression 'where ((__8__locals1_beginDate_Date_1 <= Convert([s].EndTime, DateTime).Date) AndAlso (Convert([s].EndTime, DateTime).Date <= __endDate_Date_2))' could not be translated and will be evaluated locally.
2019-09-24 12:21:46.858 +12:00 [INF] Executed DbCommand (86ms) [Parameters=[@__8__locals1_teacherId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `s.CourseInstance`.`course_instance_id`, `s.CourseInstance`.`begin_date`, `s.CourseInstance`.`course_id`, `s.CourseInstance`.`end_date`, `s.CourseInstance`.`invoice_date`, `s.CourseInstance`.`learner_id`, `s.CourseInstance`.`org_id`, `s.CourseInstance`.`room_id`, `s.CourseInstance`.`teacher_id`, `s.GroupCourseInstance`.`group_course_instance_id`, `s.GroupCourseInstance`.`begin_date`, `s.GroupCourseInstance`.`course_id`, `s.GroupCourseInstance`.`end_date`, `s.GroupCourseInstance`.`invoice_date`, `s.GroupCourseInstance`.`is_activate`, `s.GroupCourseInstance`.`is_started`, `s.GroupCourseInstance`.`org_id`, `s.GroupCourseInstance`.`room_id`, `s.GroupCourseInstance`.`teacher_id`, `s`.`end_time` AS `end`, `s`.`begin_time` AS `BeginTime0`, `s.Learner`.`first_name`, `s.GroupCourseInstance.Course`.`course_name`, `s.TrialCourse`.`course_name`, `s.CourseInstance.Course`.`course_name`, `s.Org`.`org_name` AS `orgName0`, `s.Room`.`room_name` AS `roomName0`, `s.Org`.`abbr` AS `orgAbbr`, `s`.`org_id` AS `OrgId`, `s`.`room_id` AS `RoomId`, `s`.`is_confirm` AS `IsConfirm`, `s`.`is_changed` AS `IsChanged`, `s`.`is_canceled` AS `IsCanceled`, `s`.`reason`, `s`.`lesson_id` AS `LessonId`, `s`.`learner_id` AS `LearnerId`, (
    SELECT `z`.`room_name`
    FROM `ablemusic`.`room` AS `z`
    WHERE `z`.`room_id` = (
        SELECT `r`.`room_id`
        FROM `ablemusic`.`lesson` AS `r`
        WHERE `r`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `RoomName`, (
    SELECT `z0`.`org_name`
    FROM `ablemusic`.`org` AS `z0`
    WHERE `z0`.`org_id` = (
        SELECT `r0`.`org_id`
        FROM `ablemusic`.`lesson` AS `r0`
        WHERE `r0`.`lesson_id` = `s`.`new_lesson_id`
        LIMIT 1
    )
    LIMIT 1
) AS `OrgName`, (
    SELECT `r1`.`begin_time`
    FROM `ablemusic`.`lesson` AS `r1`
    WHERE `r1`.`lesson_id` = `s`.`new_lesson_id`
    LIMIT 1
) AS `BeginTime`
FROM `ablemusic`.`lesson` AS `s`
LEFT JOIN `ablemusic`.`room` AS `s.Room` ON `s`.`room_id` = `s.Room`.`room_id`
INNER JOIN `ablemusic`.`org` AS `s.Org` ON `s`.`org_id` = `s.Org`.`org_id`
LEFT JOIN `ablemusic`.`course` AS `s.TrialCourse` ON `s`.`trial_course_id` = `s.TrialCourse`.`course_id`
LEFT JOIN `ablemusic`.`learner` AS `s.Learner` ON `s`.`learner_id` = `s.Learner`.`learner_id`
LEFT JOIN `ablemusic`.`one2one_course_instance` AS `s.CourseInstance` ON `s`.`course_instance_id` = `s.CourseInstance`.`course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.CourseInstance.Course` ON `s.CourseInstance`.`course_id` = `s.CourseInstance.Course`.`course_id`
LEFT JOIN `ablemusic`.`group_course_instance` AS `s.GroupCourseInstance` ON `s`.`group_course_instance_id` = `s.GroupCourseInstance`.`group_course_instance_id`
LEFT JOIN `ablemusic`.`course` AS `s.GroupCourseInstance.Course` ON `s.GroupCourseInstance`.`course_id` = `s.GroupCourseInstance.Course`.`course_id`
WHERE `s`.`teacher_id` = @__8__locals1_teacherId_0
2019-09-24 12:21:46.859 +12:00 [INF] Executed action method Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6375.0592000000006ms.
2019-09-24 12:21:46.860 +12:00 [INF] Executing ObjectResult, writing value of type 'Pegasus_backend.Models.Result`1[[System.Object, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2019-09-24 12:21:46.860 +12:00 [INF] Executed action Pegasus_backend.Controllers.LessonController.GetLessonsForTeacher (Pegasus_backend) in 6375.9712ms
2019-09-24 12:21:46.860 +12:00 [INF] Response {"IsSuccess":true,"ErrorCode":null,"IsFound":true,"ErrorMessage":null,"Note":null,"Data":[]}
2019-09-24 12:21:46.860 +12:00 [INF] Request finished in 6396.3478ms 200 application/json; charset=utf-8
=======
2019-09-24 09:59:25.036 +12:00 [INF] User profile is available. Using 'C:\Users\lgx95\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-09-24 09:59:26.591 +12:00 [INF] Setting up the time host service. Everyday run at 23pm
2019-09-24 09:59:27.137 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/values  
2019-09-24 09:59:27.137 +12:00 [INF] Request starting HTTP/1.1 DEBUG http://localhost:5000/  0
2019-09-24 09:59:27.182 +12:00 [INF] Request finished in 46.7405ms 200 
2019-09-24 09:59:27.237 +12:00 [WRN] Failed to determine the https port for redirect.
2019-09-24 09:59:27.524 +12:00 [INF] 
2019-09-24 09:59:27.939 +12:00 [INF] Route matched with {action = "Get", controller = "Values"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller Pegasus_backend.Controllers.ValuesController (Pegasus_backend).
2019-09-24 09:59:28.489 +12:00 [INF] Executing action method Pegasus_backend.Controllers.ValuesController.Get (Pegasus_backend) - Validation state: "Valid"
2019-09-24 09:59:28.505 +12:00 [INF] ValuesController LogInfoToFile: hello
2019-09-24 09:59:28.513 +12:00 [INF] Executed action method Pegasus_backend.Controllers.ValuesController.Get (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7.5814ms.
2019-09-24 09:59:28.534 +12:00 [INF] Executing ObjectResult, writing value of type 'System.DateTime'.
2019-09-24 09:59:28.675 +12:00 [INF] Executed action Pegasus_backend.Controllers.ValuesController.Get (Pegasus_backend) in 730.1196ms
2019-09-24 09:59:28.680 +12:00 [INF] Response "2019-09-24T09:59:28.5060231"
2019-09-24 09:59:28.690 +12:00 [INF] Request finished in 1559.762ms 200 application/json; charset=utf-8
2019-09-24 09:59:30.301 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/favicon.ico  
2019-09-24 09:59:30.305 +12:00 [INF] 
2019-09-24 09:59:30.307 +12:00 [INF] Response 
2019-09-24 09:59:30.307 +12:00 [INF] Request finished in 6.1118ms 404 
2019-09-24 10:02:04.435 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/chat/negotiate?userId=107  
2019-09-24 10:02:04.439 +12:00 [INF] Policy execution successful.
2019-09-24 10:02:04.442 +12:00 [INF] Request finished in 7.3702ms 204 
2019-09-24 10:02:04.887 +12:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/chat/negotiate?userId=107 text/plain;charset=UTF-8 0
2019-09-24 10:02:04.888 +12:00 [INF] Policy execution successful.
2019-09-24 10:02:04.926 +12:00 [INF] Request finished in 38.6108ms 200 application/json
2019-09-24 10:02:04.951 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/chat?userId=107&id=bADsikTR1YHEWpR9JwXoYA  
2019-09-24 10:02:04.952 +12:00 [INF] Policy execution successful.
2019-09-24 10:02:05.168 +12:00 [INF] Completed connection handshake. Using HubProtocol 'json'.
2019-09-24 10:02:08.521 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:02:08.632 +12:00 [ERR] Error when dispatching 'OnConnectedAsync' on hub.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnConnectedAsync() in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 30
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnConnectedAsync(HubConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.RunHubAsync(HubConnectionContext connection)
2019-09-24 10:02:09.118 +12:00 [INF] Request finished in 4166.8896ms 101 
2019-09-24 10:28:27.043 +12:00 [INF] User profile is available. Using 'C:\Users\lgx95\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-09-24 10:28:28.274 +12:00 [INF] Setting up the time host service. Everyday run at 23pm
2019-09-24 10:28:28.674 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/values  
2019-09-24 10:28:28.674 +12:00 [INF] Request starting HTTP/1.1 DEBUG http://localhost:5000/  0
2019-09-24 10:28:28.714 +12:00 [INF] Request finished in 36.7251ms 200 
2019-09-24 10:28:28.785 +12:00 [WRN] Failed to determine the https port for redirect.
2019-09-24 10:28:29.038 +12:00 [INF] 
2019-09-24 10:28:29.444 +12:00 [INF] Route matched with {action = "Get", controller = "Values"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller Pegasus_backend.Controllers.ValuesController (Pegasus_backend).
2019-09-24 10:28:29.884 +12:00 [INF] Executing action method Pegasus_backend.Controllers.ValuesController.Get (Pegasus_backend) - Validation state: "Valid"
2019-09-24 10:28:29.899 +12:00 [INF] ValuesController LogInfoToFile: hello
2019-09-24 10:28:29.906 +12:00 [INF] Executed action method Pegasus_backend.Controllers.ValuesController.Get (Pegasus_backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.5205ms.
2019-09-24 10:28:29.921 +12:00 [INF] Executing ObjectResult, writing value of type 'System.DateTime'.
2019-09-24 10:28:30.031 +12:00 [INF] Executed action Pegasus_backend.Controllers.ValuesController.Get (Pegasus_backend) in 580.3522ms
2019-09-24 10:28:30.034 +12:00 [INF] Response "2019-09-24T10:28:29.9002008"
2019-09-24 10:28:30.048 +12:00 [INF] Request finished in 1377.2282ms 200 application/json; charset=utf-8
2019-09-24 10:29:30.617 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/chat/negotiate?userId=107  
2019-09-24 10:29:30.629 +12:00 [INF] Policy execution successful.
2019-09-24 10:29:30.631 +12:00 [INF] Request finished in 14.0095ms 204 
2019-09-24 10:29:31.271 +12:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/chat/negotiate?userId=107 text/plain;charset=UTF-8 0
2019-09-24 10:29:31.272 +12:00 [INF] Policy execution successful.
2019-09-24 10:29:31.301 +12:00 [INF] Request finished in 30.4783ms 200 application/json
2019-09-24 10:29:31.855 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/chat?userId=107&id=RVA8CyKzcVbjsEqepo9eoA  
2019-09-24 10:29:31.856 +12:00 [INF] Policy execution successful.
2019-09-24 10:29:32.091 +12:00 [INF] Completed connection handshake. Using HubProtocol 'json'.
2019-09-24 10:29:34.066 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:29:35.872 +12:00 [INF] Executed DbCommand (82ms) [Parameters=[@___userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE `x`.`user_id` = @___userId_0
LIMIT 1
2019-09-24 10:29:36.645 +12:00 [INF] Executed DbCommand (156ms) [Parameters=[@p1='?' (DbType = Int16), @p0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ablemusic`.`user` SET `is_online` = @p0
WHERE `user_id` = @p1;
SELECT ROW_COUNT();
2019-09-24 10:29:36.922 +12:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE (`x`.`is_online` = 1) AND (`x`.`is_activate` = 1)
2019-09-24 10:30:11.090 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:30:11.348 +12:00 [INF] Executed DbCommand (51ms) [Parameters=[@__chatMessageModel_SenderUserId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`role_id`
FROM `ablemusic`.`user` AS `x`
WHERE `x`.`user_id` = @__chatMessageModel_SenderUserId_0
LIMIT 1
2019-09-24 10:30:11.550 +12:00 [INF] Executed DbCommand (51ms) [Parameters=[@__senderRoleId_0='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`role_name`
FROM `ablemusic`.`role` AS `x`
WHERE `x`.`role_id` = @__senderRoleId_0
LIMIT 1
2019-09-24 10:30:59.715 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:30:59.800 +12:00 [ERR] Error when dispatching 'OnDisconnectedAsync' on hub.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
2019-09-24 10:30:59.956 +12:00 [ERR] Failed disposing connection RVA8CyKzcVbjsEqepo9eoA.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.RunHubAsync(HubConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionDispatcher.ExecuteApplication(ConnectionDelegate connectionDelegate, HttpConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.WaitOnTasks(Task applicationTask, Task transportTask, Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.DisposeAsync(Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionManager.DisposeAndRemoveAsync(HttpConnectionContext connection, Boolean closeGracefully)
2019-09-24 10:30:59.986 +12:00 [INF] Request finished in 88131.0142ms 101 
2019-09-24 10:33:56.602 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/chat/negotiate?userId=107  
2019-09-24 10:33:56.605 +12:00 [INF] Policy execution successful.
2019-09-24 10:33:56.614 +12:00 [INF] Request finished in 11.8402ms 204 
2019-09-24 10:33:57.283 +12:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/chat/negotiate?userId=107 text/plain;charset=UTF-8 0
2019-09-24 10:33:57.284 +12:00 [INF] Policy execution successful.
2019-09-24 10:33:57.287 +12:00 [INF] Request finished in 3.022ms 200 application/json
2019-09-24 10:33:57.453 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/chat?userId=107&id=fOdWj97bopabd641jc2z9g  
2019-09-24 10:33:57.454 +12:00 [INF] Policy execution successful.
2019-09-24 10:33:57.787 +12:00 [INF] Completed connection handshake. Using HubProtocol 'json'.
2019-09-24 10:33:57.805 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:33:57.984 +12:00 [INF] Executed DbCommand (53ms) [Parameters=[@___userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE `x`.`user_id` = @___userId_0
LIMIT 1
2019-09-24 10:33:58.218 +12:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE (`x`.`is_online` = 1) AND (`x`.`is_activate` = 1)
2019-09-24 10:37:40.609 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:37:40.694 +12:00 [ERR] Error when dispatching 'OnDisconnectedAsync' on hub.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
2019-09-24 10:37:40.700 +12:00 [ERR] Failed disposing connection fOdWj97bopabd641jc2z9g.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.RunHubAsync(HubConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionDispatcher.ExecuteApplication(ConnectionDelegate connectionDelegate, HttpConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.WaitOnTasks(Task applicationTask, Task transportTask, Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.DisposeAsync(Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionManager.DisposeAndRemoveAsync(HttpConnectionContext connection, Boolean closeGracefully)
2019-09-24 10:37:40.706 +12:00 [INF] Request finished in 223252.4474ms 101 
2019-09-24 10:38:03.722 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/chat/negotiate?userId=107  
2019-09-24 10:38:03.724 +12:00 [INF] Policy execution successful.
2019-09-24 10:38:03.731 +12:00 [INF] Request finished in 8.9507ms 204 
2019-09-24 10:38:24.120 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/chat/negotiate?userId=107  
2019-09-24 10:38:24.128 +12:00 [INF] Policy execution successful.
2019-09-24 10:38:24.128 +12:00 [INF] Request finished in 47.2909ms 204 
2019-09-24 10:38:24.647 +12:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/chat/negotiate?userId=107 text/plain;charset=UTF-8 0
2019-09-24 10:38:24.647 +12:00 [INF] Policy execution successful.
2019-09-24 10:38:24.648 +12:00 [INF] Request finished in 1.1026ms 200 application/json
2019-09-24 10:38:24.712 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/chat?userId=107&id=GHNLR5HvJ-ohz9U207_zJw  
2019-09-24 10:38:24.713 +12:00 [INF] Policy execution successful.
2019-09-24 10:38:24.731 +12:00 [INF] Completed connection handshake. Using HubProtocol 'json'.
2019-09-24 10:38:24.739 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:38:24.921 +12:00 [INF] Executed DbCommand (53ms) [Parameters=[@___userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE `x`.`user_id` = @___userId_0
LIMIT 1
2019-09-24 10:38:25.125 +12:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE (`x`.`is_online` = 1) AND (`x`.`is_activate` = 1)
2019-09-24 10:40:54.575 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:40:54.626 +12:00 [ERR] Error when dispatching 'OnDisconnectedAsync' on hub.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
2019-09-24 10:40:54.638 +12:00 [ERR] Failed disposing connection GHNLR5HvJ-ohz9U207_zJw.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.RunHubAsync(HubConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionDispatcher.ExecuteApplication(ConnectionDelegate connectionDelegate, HttpConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.WaitOnTasks(Task applicationTask, Task transportTask, Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.DisposeAsync(Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionManager.DisposeAndRemoveAsync(HttpConnectionContext connection, Boolean closeGracefully)
2019-09-24 10:40:54.644 +12:00 [INF] Request finished in 149931.2491ms 101 
2019-09-24 10:41:22.110 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/chat/negotiate?userId=107  
2019-09-24 10:41:22.111 +12:00 [INF] Policy execution successful.
2019-09-24 10:41:22.111 +12:00 [INF] Request finished in 0.9627ms 204 
2019-09-24 10:41:22.796 +12:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/chat/negotiate?userId=107 text/plain;charset=UTF-8 0
2019-09-24 10:41:22.796 +12:00 [INF] Policy execution successful.
2019-09-24 10:41:22.797 +12:00 [INF] Request finished in 1.4089ms 200 application/json
2019-09-24 10:41:23.328 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/chat?userId=107&id=GDylOlKRjL3EAMlFF-o4TQ  
2019-09-24 10:41:23.328 +12:00 [INF] Policy execution successful.
2019-09-24 10:41:23.409 +12:00 [INF] Completed connection handshake. Using HubProtocol 'json'.
2019-09-24 10:41:23.411 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:41:23.598 +12:00 [INF] Executed DbCommand (55ms) [Parameters=[@___userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE `x`.`user_id` = @___userId_0
LIMIT 1
2019-09-24 10:41:23.822 +12:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE (`x`.`is_online` = 1) AND (`x`.`is_activate` = 1)
2019-09-24 10:42:21.202 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:42:21.299 +12:00 [ERR] Error when dispatching 'OnDisconnectedAsync' on hub.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
2019-09-24 10:42:21.323 +12:00 [ERR] Failed disposing connection GDylOlKRjL3EAMlFF-o4TQ.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.RunHubAsync(HubConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionDispatcher.ExecuteApplication(ConnectionDelegate connectionDelegate, HttpConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.WaitOnTasks(Task applicationTask, Task transportTask, Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.DisposeAsync(Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionManager.DisposeAndRemoveAsync(HttpConnectionContext connection, Boolean closeGracefully)
2019-09-24 10:42:21.327 +12:00 [INF] Request finished in 57998.7079ms 101 
2019-09-24 10:42:39.721 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/chat/negotiate?userId=107  
2019-09-24 10:42:39.728 +12:00 [INF] Policy execution successful.
2019-09-24 10:42:39.729 +12:00 [INF] Request finished in 8.4164ms 204 
2019-09-24 10:42:40.390 +12:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/chat/negotiate?userId=107 text/plain;charset=UTF-8 0
2019-09-24 10:42:40.390 +12:00 [INF] Policy execution successful.
2019-09-24 10:42:40.392 +12:00 [INF] Request finished in 2.5647ms 200 application/json
2019-09-24 10:42:41.003 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/chat?userId=107&id=ZvoFO8AdrDpgrurGoL3vLg  
2019-09-24 10:42:41.004 +12:00 [INF] Policy execution successful.
2019-09-24 10:42:41.074 +12:00 [INF] Completed connection handshake. Using HubProtocol 'json'.
2019-09-24 10:42:41.077 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:42:41.291 +12:00 [INF] Executed DbCommand (61ms) [Parameters=[@___userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE `x`.`user_id` = @___userId_0
LIMIT 1
2019-09-24 10:42:41.493 +12:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE (`x`.`is_online` = 1) AND (`x`.`is_activate` = 1)
2019-09-24 10:43:45.695 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:43:45.797 +12:00 [ERR] Error when dispatching 'OnDisconnectedAsync' on hub.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
2019-09-24 10:43:45.806 +12:00 [ERR] Failed disposing connection ZvoFO8AdrDpgrurGoL3vLg.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.RunHubAsync(HubConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionDispatcher.ExecuteApplication(ConnectionDelegate connectionDelegate, HttpConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.WaitOnTasks(Task applicationTask, Task transportTask, Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.DisposeAsync(Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionManager.DisposeAndRemoveAsync(HttpConnectionContext connection, Boolean closeGracefully)
2019-09-24 10:43:45.811 +12:00 [INF] Request finished in 64808.0486ms 101 
2019-09-24 10:44:03.720 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/chat/negotiate?userId=107  
2019-09-24 10:44:03.721 +12:00 [INF] Policy execution successful.
2019-09-24 10:44:03.721 +12:00 [INF] Request finished in 1.1166ms 204 
2019-09-24 10:44:04.371 +12:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/chat/negotiate?userId=107 text/plain;charset=UTF-8 0
2019-09-24 10:44:04.371 +12:00 [INF] Policy execution successful.
2019-09-24 10:44:04.372 +12:00 [INF] Request finished in 1.0189ms 200 application/json
2019-09-24 10:44:04.975 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/chat?userId=107&id=Rbkcgwc_vtMkRVI7FmDGwg  
2019-09-24 10:44:04.976 +12:00 [INF] Policy execution successful.
2019-09-24 10:44:05.050 +12:00 [INF] Completed connection handshake. Using HubProtocol 'json'.
2019-09-24 10:44:05.052 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:44:05.235 +12:00 [INF] Executed DbCommand (51ms) [Parameters=[@___userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE `x`.`user_id` = @___userId_0
LIMIT 1
2019-09-24 10:44:05.417 +12:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE (`x`.`is_online` = 1) AND (`x`.`is_activate` = 1)
2019-09-24 10:44:50.861 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:44:50.919 +12:00 [ERR] Error when dispatching 'OnDisconnectedAsync' on hub.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
2019-09-24 10:44:50.922 +12:00 [ERR] Failed disposing connection Rbkcgwc_vtMkRVI7FmDGwg.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.RunHubAsync(HubConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionDispatcher.ExecuteApplication(ConnectionDelegate connectionDelegate, HttpConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.WaitOnTasks(Task applicationTask, Task transportTask, Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.DisposeAsync(Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionManager.DisposeAndRemoveAsync(HttpConnectionContext connection, Boolean closeGracefully)
2019-09-24 10:44:50.925 +12:00 [INF] Request finished in 45949.9053ms 101 
2019-09-24 10:45:08.557 +12:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/chat/negotiate?userId=107  
2019-09-24 10:45:08.558 +12:00 [INF] Policy execution successful.
2019-09-24 10:45:08.558 +12:00 [INF] Request finished in 0.8107ms 204 
2019-09-24 10:45:09.211 +12:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/chat/negotiate?userId=107 text/plain;charset=UTF-8 0
2019-09-24 10:45:09.211 +12:00 [INF] Policy execution successful.
2019-09-24 10:45:09.211 +12:00 [INF] Request finished in 0.8098ms 200 application/json
2019-09-24 10:45:09.654 +12:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/chat?userId=107&id=SvFgUDn_FiDFAQ_yDeAUrA  
2019-09-24 10:45:09.654 +12:00 [INF] Policy execution successful.
2019-09-24 10:45:09.823 +12:00 [INF] Completed connection handshake. Using HubProtocol 'json'.
2019-09-24 10:45:09.825 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:45:10.399 +12:00 [INF] Executed DbCommand (98ms) [Parameters=[@___userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE `x`.`user_id` = @___userId_0
LIMIT 1
2019-09-24 10:45:10.715 +12:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `x`.`user_id`, `x`.`created_at`, `x`.`is_activate`, `x`.`is_online`, `x`.`password`, `x`.`role_id`, `x`.`signature`, `x`.`unread_message_id`, `x`.`user_name`
FROM `ablemusic`.`user` AS `x`
WHERE (`x`.`is_online` = 1) AND (`x`.`is_activate` = 1)
2019-09-24 10:45:53.137 +12:00 [INF] Entity Framework Core 2.1.11-servicing-32099 initialized 'ablemusicContext' using provider 'MySql.Data.EntityFrameworkCore' with options: None
2019-09-24 10:45:53.206 +12:00 [ERR] Error when dispatching 'OnDisconnectedAsync' on hub.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
2019-09-24 10:45:53.211 +12:00 [ERR] Failed disposing connection SvFgUDn_FiDFAQ_yDeAUrA.
System.InvalidOperationException: The provider for the source IQueryable doesn't implement IDbAsyncQueryProvider. Only providers that implement IDbAsyncQueryProvider can be used for Entity Framework asynchronous operations. For more details see http://go.microsoft.com/fwlink/?LinkId=287068.
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at System.Data.Entity.QueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source)
   at Pegasus_backend.Controllers.MobileControllers.Chatroom.OnDisconnectedAsync(Exception exception) in C:\angular\pegasusBackend\Controllers\MobileControllers\Chatroom.cs:line 98
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.OnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.HubOnDisconnectedAsync(HubConnectionContext connection, Exception exception)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.RunHubAsync(HubConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.SignalR.HubConnectionHandler`1.OnConnectedAsync(ConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionDispatcher.ExecuteApplication(ConnectionDelegate connectionDelegate, HttpConnectionContext connection)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.WaitOnTasks(Task applicationTask, Task transportTask, Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionContext.DisposeAsync(Boolean closeGracefully)
   at Microsoft.AspNetCore.Http.Connections.Internal.HttpConnectionManager.DisposeAndRemoveAsync(HttpConnectionContext connection, Boolean closeGracefully)
2019-09-24 10:45:53.217 +12:00 [INF] Request finished in 43563.3154ms 101 
>>>>>>> e97f113d61d7c9c2ca6a40d3cf8f56f2b5bf4b4c
